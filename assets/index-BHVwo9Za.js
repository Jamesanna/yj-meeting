import{i as ys,g as ks,a as Ss,d as Q,u as Pe,b as Le,c as Ae,e as se,f as Oe,s as Ge,h as Cs,j as e,r as n,k as Ds,l as te,m as Is,n as Es,C as As,o as I,z as Ms,p as ds,q as Ts,t as _s,v as Ps,w as He,B as Ls,x as Os,y as es,X as je,A as Ue,S as Be,D as xs,L as Ke,M as Gs,E as ms,F as hs,G as Rs,H as Us,I as us,J as Bs,K as $e,N as $s,U as Ws,O as ss,Z as ps,P as zs,Q as Fs,R as Ve,T as Qs,V as Vs,W as qs,Y as Te,_ as bs,$ as fs,a0 as qe,a1 as Ye,a2 as Ys,a3 as Re,a4 as Js,a5 as Hs,a6 as js,a7 as ie,a8 as oe,a9 as ts,aa as Ks,ab as as,ac as Zs,ad as ls,ae as Xs,af as et,ag as st,ah as tt,ai as at}from"./vendor-BCKuvD4-.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))x(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const m of c.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&x(m)}).observe(document,{childList:!0,subtree:!0});function t(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerPolicy&&(c.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?c.credentials="include":i.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function x(i){if(i.ep)return;i.ep=!0;const c=t(i);fetch(i.href,c)}})();const lt="modulepreload",nt=function(r,a){return new URL(r,a).href},ns={},rs=function(a,t,x){let i=Promise.resolve();if(t&&t.length>0){let m=function(d){return Promise.all(d.map(p=>Promise.resolve(p).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};const f=document.getElementsByTagName("link"),w=document.querySelector("meta[property=csp-nonce]"),k=(w==null?void 0:w.nonce)||(w==null?void 0:w.getAttribute("nonce"));i=m(t.map(d=>{if(d=nt(d,x),d in ns)return;ns[d]=!0;const p=d.endsWith(".css"),b=p?'[rel="stylesheet"]':"";if(!!x)for(let N=f.length-1;N>=0;N--){const R=f[N];if(R.href===d&&(!p||R.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${b}`))return;const E=document.createElement("link");if(E.rel=p?"stylesheet":lt,p||(E.as="script"),E.crossOrigin="",E.href=d,k&&E.setAttribute("nonce",k),document.head.appendChild(E),p)return new Promise((N,R)=>{E.addEventListener("load",N),E.addEventListener("error",()=>R(new Error(`Unable to preload CSS for ${d}`)))})}))}function c(m){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=m,window.dispatchEvent(f),!f.defaultPrevented)throw m}return i.then(m=>{for(const f of m||[])f.status==="rejected"&&c(f.reason);return a().catch(c)})},rt={apiKey:"AIzaSyDLeHbJU-n7VL6s2dUavvs4TSW_WlQwR1w",authDomain:"yj-meeting.firebaseapp.com",projectId:"yj-meeting",storageBucket:"yj-meeting.firebasestorage.app",messagingSenderId:"815452229762",appId:"1:815452229762:web:bc002499e79994351e649b",measurementId:"G-W7882SVERB"},Ze=ys(rt),y=ks(Ze),it=Ss(Ze),ot=Object.freeze(Object.defineProperty({__proto__:null,auth:it,db:y,default:Ze},Symbol.toStringTag,{value:"Module"})),g={BOOKINGS:"bookings",ANNOUNCEMENTS:"announcements",USERS:"users",CONFIG:"config",DEVICES:"devices",SYSTEM_SETTINGS:"system_settings",DEPARTMENTS:"departments"},Je=async(r,a,t)=>{try{const x=Q(y,r,a),i=await Cs(x);return i.exists()?i.data():t}catch(x){return console.error(`Error getting doc ${a} from ${r}:`,x),t}},u={getSystemSettings:async()=>{const r={allowedDomain:"yi-jun.com",corpSsid:".YIJUN",guestSsid:".YJ_VIP",guestPwd:"@1681688",showQuickBookQr:!0,showWifiInfo:!0,requireGoogleLogin:!0,apiKey:""};return await Je(g.SYSTEM_SETTINGS,"main",r)},updateSystemSettings:async r=>{const a=Q(y,g.SYSTEM_SETTINGS,"main");await Ge(a,r,{merge:!0})},getDepartments:async()=>(await Je(g.DEPARTMENTS,"main",{list:["財務","行政","工程","資訊","專案"]})).list,updateDepartments:async r=>{const a=Q(y,g.DEPARTMENTS,"main");await Ge(a,{list:r})},getConfig:async()=>await Je(g.CONFIG,"main",{allowedDomain:"yi-jun.com"}),updateConfig:async r=>{const a=Q(y,g.CONFIG,"main");await Ge(a,r,{merge:!0})},getBookings:async()=>(await Oe(se(y,g.BOOKINGS))).docs.map(a=>({...a.data(),id:a.id})),saveBooking:async r=>{const{id:a,...t}=r;a&&!a.startsWith("book_")?await Ge(Q(y,g.BOOKINGS,a),t):await Ae(se(y,g.BOOKINGS),t)},deleteBooking:async r=>{await Le(Q(y,g.BOOKINGS,r))},getAnnouncements:async()=>{const a=(await Oe(se(y,g.ANNOUNCEMENTS))).docs.map(t=>({...t.data(),id:t.id}));return a.length===0?[{id:"1",content:"歡迎使用羿鈞科技會議室預約系統！目前已啟動 Firebase 雲端同步。",isActive:!0,createdAt:Date.now()}]:a},saveAnnouncement:async r=>{const{id:a,...t}=r;await Ae(se(y,g.ANNOUNCEMENTS),t)},updateAnnouncement:async(r,a)=>{const t=Q(y,g.ANNOUNCEMENTS,r);await Pe(t,a)},deleteAnnouncement:async r=>{await Le(Q(y,g.ANNOUNCEMENTS,r))},getDevices:async()=>{const a=(await Oe(se(y,g.DEVICES))).docs.map(t=>({...t.data(),id:t.id}));return a.length===0?[{id:"dev_1",name:"4K 無線投影機",status:"available",note:"放置於會議桌下方"},{id:"dev_2",name:"高功率雷筆",status:"available",note:"行政部領取"}]:a},saveDevice:async r=>{const{id:a,...t}=r;await Ae(se(y,g.DEVICES),t)},updateDevice:async(r,a)=>{const t=Q(y,g.DEVICES,r);await Pe(t,a)},deleteDevice:async r=>{await Le(Q(y,g.DEVICES,r))},getUsers:async()=>{const a=(await Oe(se(y,g.USERS))).docs.map(t=>({...t.data(),id:t.id}));if(a.length===0){const t={email:"sysop",name:"系統管理員",role:"admin",password:"Aa123456"},x=await Ae(se(y,g.USERS),t);return[{...t,id:x.id}]}return a},addUser:async r=>{const{id:a,...t}=r;await Ae(se(y,g.USERS),t)},updateUser:async(r,a)=>{const t=Q(y,g.USERS,r);await Pe(t,a)},deleteUser:async r=>{await Le(Q(y,g.USERS,r))},changePassword:async(r,a)=>{const t=Q(y,g.USERS,r);await Pe(t,{password:a})}},_e="V2.184",We="羿鈞科技會議室預約系統",is=["08:00","08:30","09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00"],ct=["週一","週二","週三","週四","週五","週六","週日"],Me={"2026-01-01":"元旦","2026-02-16":"農曆除夕","2026-02-17":"農曆新年(初一)","2026-02-18":"農曆新年(初二)","2026-02-19":"農曆新年(初三)","2026-02-20":"農曆新年(初四)","2026-02-27":"228和平紀念日彈性放假","2026-02-28":"228和平紀念日","2026-04-03":"兒童節","2026-04-04":"清明節(民族掃墓節)","2026-04-06":"清明節補假","2026-05-01":"勞動節","2026-06-19":"端午節","2026-09-25":"中秋節","2026-10-09":"國慶日彈性放假","2026-10-10":"國慶日"},dt=({announcements:r})=>{const a=r.filter(x=>x.isActive),t=a.length>0?a.map(x=>x.content).join(" | "):"目前尚無公告";return e.jsx("div",{className:"bg-blue-600 text-white py-2 px-4 shadow-sm marquee-container relative z-10",children:e.jsx("div",{className:"marquee-content font-medium",children:t})})},os=({bookings:r,selectedDate:a,onDateSelect:t})=>{const[x,i]=n.useState(new Date(a)),[c,m]=n.useState(null),f=new Date(x.getFullYear(),x.getMonth(),1),w=Ds(f),k=te(f),d=k===0?-6:1-k,p=new Date(f);p.setDate(f.getDate()+d);const b=Is(w,{weekStartsOn:1}),V=Es({start:p,end:b}),E=()=>i(es(x,1)),N=()=>i(es(x,-1)),R=j=>{const q=I(j,"yyyy-MM-dd");m(c===q?null:q),t(j)};return e.jsxs("div",{className:"bg-white p-2 md:p-4 select-none max-w-full overflow-visible",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6 px-2",children:[e.jsx("button",{onClick:N,className:"p-2.5 hover:bg-slate-100 rounded-full transition-colors",children:e.jsx(As,{className:"w-6 h-6 text-slate-400"})}),e.jsx("h2",{className:"text-xl md:text-2xl font-bold text-slate-800 tracking-tight",children:I(x,"MMMM yyyy",{locale:Ms})}),e.jsx("button",{onClick:E,className:"p-2.5 hover:bg-slate-100 rounded-full transition-colors",children:e.jsx(ds,{className:"w-6 h-6 text-slate-400"})})]}),e.jsx("div",{className:"grid grid-cols-7 mb-4 border-b border-slate-50",children:ct.map(j=>e.jsx("div",{className:"text-center text-xs md:text-sm text-slate-400 font-semibold py-3 uppercase tracking-widest",children:j},j))}),e.jsx("div",{className:"grid grid-cols-7 gap-y-1 relative",children:V.map((j,q)=>{const C=I(j,"yyyy-MM-dd"),B=r.filter(A=>A.date===C).sort((A,Z)=>A.startTime.localeCompare(Z.startTime)),v=Ts(j,f),o=_s(j,a),$=Ps(j),W=te(j)===0||te(j)===6,z=C<I(new Date,"yyyy-MM-dd"),ae=Me[C],Y=!!ae,ce=q%7;let T="absolute bottom-full mb-4 w-64 bg-slate-900 text-white p-5 rounded-[2rem] shadow-2xl z-50 pointer-events-none border border-white/5 animate-in fade-in zoom-in-95 ",ee="absolute top-full border-[10px] border-transparent border-t-slate-900 ";return ce<2?(T+="left-0 translate-x-0",ee+="left-6 translate-x-0"):ce>4?(T+="right-0 left-auto translate-x-0",ee+="right-6 left-auto"):(T+="left-1/2 -translate-x-1/2",ee+="left-1/2 -translate-x-1/2"),e.jsxs("div",{onClick:()=>v&&R(j),onMouseEnter:()=>m(C),onMouseLeave:()=>m(null),className:`relative flex flex-col items-center justify-center h-14 md:h-20 cursor-pointer group transition-all ${v?"text-slate-800":"opacity-10 pointer-events-none"}`,children:[e.jsxs("div",{className:`w-10 h-10 md:w-14 md:h-14 flex items-center justify-center font-bold text-base md:text-xl transition-all duration-300 ${o?"calendar-day-selected scale-110":$?"calendar-day-today":"group-hover:bg-slate-100 rounded-2xl"} ${v&&(z||Y)&&!o?"text-slate-300":""} ${W&&v&&!o?"text-slate-200":""}`,children:[I(j,"d"),Y&&v&&e.jsx("div",{className:"absolute top-1 right-1 md:top-2 md:right-2 w-1.5 h-1.5 bg-orange-500 rounded-full"})]}),e.jsx("div",{className:"h-1 mt-1.5 flex space-x-1",children:v&&!W&&!Y&&B.length>0&&e.jsx("div",{className:`w-5 h-1 rounded-full ${o?"bg-white/80":z?"bg-slate-200":"bg-[#e54304]"}`})}),c===C&&v&&e.jsxs("div",{className:`block ${T}`,children:[e.jsxs("p",{className:"text-xs font-semibold uppercase text-blue-400 mb-4 border-b border-white/10 pb-2 flex items-center tracking-widest",children:[e.jsx(He,{className:"w-4 h-4 mr-2"}),"本日預約狀況"]}),e.jsx("div",{className:"space-y-3",children:Y||W||z?e.jsxs("div",{className:"flex flex-col items-center py-3",children:[e.jsx(Ls,{className:"w-8 h-8 mb-2 text-slate-500 opacity-60"}),e.jsx("p",{className:"text-base font-bold text-slate-100",children:ae||"不開放預約"}),e.jsx("p",{className:"text-[11px] font-semibold text-slate-500 mt-1 uppercase tracking-widest",children:Y?"國定假日":W?"假日休息":"日期已過"})]}):B.length>0?e.jsxs(e.Fragment,{children:[B.slice(0,4).map(A=>e.jsx("div",{className:"text-sm flex flex-col",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-semibold text-slate-100 truncate flex-1 mr-2",children:A.userName}),e.jsxs("span",{className:"font-medium text-blue-300 text-xs whitespace-nowrap",children:[A.startTime," - ",A.endTime]})]})},A.id)),B.length>4&&e.jsxs("p",{className:"text-xs text-center opacity-40 pt-2 border-t border-white/5 mt-2 italic",children:["還有 ",B.length-4," 筆..."]})]}):e.jsxs("div",{className:"flex flex-col items-center py-3 opacity-60",children:[e.jsx(Os,{className:"w-8 h-8 mb-2 text-slate-500"}),e.jsx("p",{className:"text-base font-semibold text-slate-300",children:"開放預約"})]})}),e.jsx("div",{className:ee})]})]},j.toString())})})]})},cs=({date:r,googleUser:a,isInternalNetwork:t,onGoogleLogin:x,onGoogleLogout:i,editingBooking:c,onClose:m,onSave:f,existingBookings:w,requireGoogleLogin:k=!0})=>{const[d,p]=n.useState("08:00"),[b,V]=n.useState("08:30"),[E,N]=n.useState(""),[R,j]=n.useState(""),[q,C]=n.useState("");n.useEffect(()=>{c&&(p(c.startTime),V(c.endTime),N(c.purpose),k||j(c.userName))},[c]);const B=()=>{let o="",$="";if(k){if(!a){C("請先點擊上方按鈕完成 Google 帳號驗證");return}o=a.id,$=a.name}else if(a)o=a.id,$=a.name;else{if(!R.trim()){C("請填寫預約人姓名");return}o=`guest_${Date.now()}`,$=R.trim()}if(!E.trim()){C("請填寫預約用途說明");return}if(d>=b){C("預約結束時間需晚於開始時間");return}if(w.some(z=>c&&z.id===c.id?!1:d<z.endTime&&b>z.startTime)){C("此時段已被其他同仁預約，請調整時間");return}f(o,$,d,b,E,c==null?void 0:c.id)},v=o=>"flex flex-col items-center justify-center py-3 rounded-xl transition-all duration-300 border-2 "+(o?"bg-slate-900 text-white border-transparent shadow-lg scale-[1.03]":"bg-white text-slate-400 border-slate-100 hover:bg-slate-50");return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm overflow-hidden",children:e.jsxs("div",{className:"bg-white rounded-[2rem] shadow-2xl w-full max-w-sm overflow-hidden animate-in zoom-in-95 max-h-[92vh] flex flex-col",children:[e.jsxs("div",{className:"px-6 py-5 border-b border-slate-100 flex justify-between items-center shrink-0",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800",children:[I(r,"yyyy/MM/dd")," 預約登記"]}),e.jsx("button",{type:"button",onClick:m,className:"p-2 text-slate-300 hover:text-slate-800 transition-colors",children:e.jsx(je,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6 overflow-y-auto no-scrollbar flex-1",children:[q&&e.jsxs("div",{className:"p-3 bg-red-50 text-red-600 rounded-xl text-xs font-semibold border border-red-100 flex items-center",children:[e.jsx(Ue,{className:"w-4 h-4 mr-2 shrink-0"}),q]}),a?e.jsxs("div",{className:"bg-slate-900 rounded-[1.5rem] p-5 border border-slate-800 flex flex-col space-y-3.5 shadow-xl relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-3 opacity-10 pointer-events-none",children:e.jsx(Be,{className:"w-16 h-16 text-white"})}),e.jsxs("div",{className:"flex items-center space-x-4 z-10",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-xl flex items-center justify-center text-white font-bold text-xl shadow-lg shadow-blue-500/30 shrink-0",children:a.name.charAt(0)}),e.jsxs("div",{className:"flex-1 overflow-hidden",children:[e.jsx("h4",{className:"font-bold text-white text-base",children:a.name}),e.jsx("p",{className:"text-[11px] text-blue-400 font-medium truncate",children:a.email}),e.jsxs("div",{className:"mt-0.5 flex items-center text-[9px] text-green-400 font-bold uppercase tracking-widest",children:[e.jsx(xs,{className:"w-2.5 h-2.5 mr-1"})," 身分驗證通過"]})]})]}),e.jsxs("button",{type:"button",onClick:()=>i(),className:"w-full flex items-center justify-center space-x-2 py-3 bg-white/10 hover:bg-white/20 text-white font-bold rounded-lg transition-all border border-white/10 z-20 text-[10px] active:scale-95 cursor-pointer relative",children:[e.jsx(Ke,{className:"w-3.5 h-3.5 mr-1"}),e.jsx("span",{children:"切換帳號或登出"})]})]}):k?e.jsxs("div",{className:"p-6 bg-blue-50 rounded-[2rem] text-center border-2 border-dashed border-blue-200",children:[e.jsx("div",{className:"w-12 h-12 bg-white rounded-xl flex items-center justify-center mx-auto mb-3 shadow-md",children:e.jsx(Gs,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("p",{className:"text-sm font-bold text-blue-900 mb-5 leading-relaxed",children:["為了確保預約安全性",e.jsx("br",{}),"請先完成公司帳號身分驗證"]}),e.jsx("button",{type:"button",onClick:x,className:"w-full flex items-center justify-center space-x-2.5 bg-blue-600 py-3.5 rounded-xl border-2 border-transparent font-bold text-sm text-white hover:bg-black transition-all shadow-xl shadow-blue-200 active:scale-95",children:"登入 Google 帳號"})]}):e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("label",{className:"block text-[10px] font-semibold text-slate-400 mb-1.5 uppercase tracking-widest flex items-center px-1",children:[e.jsx(ms,{className:"w-3.5 h-3.5 mr-1.5"})," 預約人姓名"]}),e.jsx("input",{type:"text",value:R,onChange:o=>j(o.target.value),placeholder:"請輸入您的真實姓名...",className:"w-full border-2 border-slate-100 rounded-xl px-4 py-3 font-bold bg-slate-50 text-slate-800 outline-none focus:border-blue-500 transition-all text-sm shadow-inner"}),e.jsx("p",{className:"text-[9px] text-slate-400 px-1 font-medium italic",children:"此模式無需登入即可預約，請確保姓名正確以利識別。"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"block text-[10px] font-semibold text-slate-400 mb-1.5 uppercase tracking-widest flex items-center px-1",children:[e.jsx(He,{className:"w-3.5 h-3.5 mr-1.5"})," 快速設定時段"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2.5 text-xs",children:[e.jsxs("button",{type:"button",onClick:()=>{p("08:00"),V("18:00")},className:v(d==="08:00"&&b==="18:00"),children:[e.jsx(hs,{className:"w-4 h-4 mb-1"}),"全日"]}),e.jsxs("button",{type:"button",onClick:()=>{p("08:00"),V("12:00")},className:v(d==="08:00"&&b==="12:00"),children:[e.jsx(Rs,{className:"w-4 h-4 mb-1"}),"上午"]}),e.jsxs("button",{type:"button",onClick:()=>{p("13:00"),V("18:00")},className:v(d==="13:00"&&b==="18:00"),children:[e.jsx(Us,{className:"w-4 h-4 mb-1"}),"下午"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 px-1",children:"開始時間"}),e.jsx("select",{value:d,onChange:o=>p(o.target.value),className:"custom-select w-full border-2 border-slate-100 rounded-xl px-4 py-3 font-bold bg-slate-50 text-slate-800 text-sm",children:is.slice(0,-1).map(o=>e.jsx("option",{value:o,children:o},o))})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 px-1",children:"結束時間"}),e.jsx("select",{value:b,onChange:o=>V(o.target.value),className:"custom-select w-full border-2 border-slate-100 rounded-xl px-4 py-3 font-bold bg-slate-50 text-slate-800 text-sm",children:is.filter(o=>o>d).map(o=>e.jsx("option",{value:o,children:o},o))})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 px-1",children:"預約用途說明"}),e.jsx("input",{type:"text",value:E,onChange:o=>N(o.target.value),placeholder:"例：專案進度同步會議",className:"w-full border-2 border-slate-100 rounded-xl px-4 py-3 font-bold bg-slate-50 text-slate-800 outline-none focus:border-blue-500 transition-all text-sm shadow-inner"})]})]}),e.jsxs("div",{className:"px-6 py-5 bg-slate-50/80 flex justify-end space-x-2.5 border-t border-slate-100 shrink-0",children:[e.jsx("button",{type:"button",onClick:m,className:"px-5 py-2.5 text-slate-400 font-bold hover:bg-slate-200 rounded-xl transition-colors text-sm",children:"取消"}),e.jsx("button",{type:"button",onClick:B,className:"px-8 py-2.5 bg-slate-900 text-white rounded-xl font-bold text-sm shadow-lg shadow-slate-200 hover:bg-black transition-all active:scale-95 flex-1",children:"確認送出預約"})]})]})})},xt=({activeTab:r,setActiveTab:a,onLogout:t,onReturnToFrontend:x,isOpen:i,onClose:c})=>{const m=[{id:"bookings",label:"會議室管理",icon:hs},{id:"system",label:"系統管理",icon:us}],f=k=>{a(k),window.innerWidth<768&&c()},w=()=>{x(),window.innerWidth<768&&c()};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`fixed inset-0 bg-black/60 z-40 transition-opacity duration-300 md:hidden ${i?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,onClick:c}),e.jsxs("div",{className:`fixed inset-y-0 left-0 z-50 w-64 bg-slate-900 text-white flex flex-col transform transition-transform duration-300 ease-in-out md:relative md:translate-x-0 ${i?"translate-x-0":"-translate-x-full"}`,children:[e.jsxs("div",{className:"p-6 border-b border-slate-800 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-blue-400 to-indigo-400 bg-clip-text text-transparent",children:We}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"後台管理系統"})]}),e.jsx("button",{onClick:c,className:"md:hidden p-1 text-slate-400 hover:text-white",children:e.jsx(je,{className:"w-6 h-6"})})]}),e.jsx("nav",{className:"flex-1 mt-6 px-4 space-y-2",children:m.map(k=>{const d=k.icon,p=r===k.id;return e.jsxs("button",{onClick:()=>f(k.id),className:`w-full flex items-center justify-between px-4 py-3 rounded-lg transition-all ${p?"bg-blue-600 text-white shadow-lg":"text-slate-400 hover:bg-slate-800 hover:text-white"}`,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(d,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:k.label})]}),p&&e.jsx(ds,{className:"w-4 h-4"})]},k.id)})}),e.jsxs("div",{className:"p-4 border-t border-slate-800 space-y-1",children:[e.jsxs("button",{onClick:w,className:"w-full flex items-center space-x-3 px-4 py-3 text-blue-400 hover:bg-blue-500/10 rounded-lg transition-colors",children:[e.jsx(Bs,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"回前台首頁"})]}),e.jsxs("button",{onClick:t,className:"w-full flex items-center space-x-3 px-4 py-3 text-red-400 hover:bg-red-500/10 rounded-lg transition-colors",children:[e.jsx(Ke,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"登出系統"})]}),e.jsx("div",{className:"pt-4 px-4 text-center",children:e.jsxs("span",{className:"text-[10px] font-black text-slate-600 uppercase tracking-widest bg-slate-800/50 px-2 py-1 rounded",children:["Version ",_e]})})]})]})]})},mt=({currentUser:r,onDataUpdate:a})=>{const[t,x]=n.useState("announcements"),[i,c]=n.useState("list"),[m,f]=n.useState("overview"),[w,k]=n.useState([]),[d,p]=n.useState([]),[b,V]=n.useState([]),[E,N]=n.useState({allowedDomain:"yi-jun.com",corpSsid:".YIJUN",guestSsid:".YJ_VIP",guestPwd:"@1681688",showQuickBookQr:!0,showWifiInfo:!0,requireGoogleLogin:!0}),[R,j]=n.useState(""),[q,C]=n.useState(""),[B,v]=n.useState(""),[o,$]=n.useState(""),[W,z]=n.useState(!0),[ae,Y]=n.useState(!0),[ce,T]=n.useState(!1),[ee,A]=n.useState(!1),[Z,le]=n.useState(null),[de,xe]=n.useState(null),[Ce,ge]=n.useState(!1),[ne,we]=n.useState(null),[De,me]=n.useState(!1),[U,ze]=n.useState(""),[Ne,ve]=n.useState(""),[ye,he]=n.useState(""),[re,ke]=n.useState(""),[ue,pe]=n.useState(""),[be,Se]=n.useState(!0),[K,fe]=n.useState(""),[Ie,l]=n.useState(""),[S,h]=n.useState(""),D=n.useMemo(()=>t==="staff_management"?w.filter(s=>s.role==="user"):t==="admins"?w.filter(s=>s.role==="admin"):[],[w,t]),J=[{version:"v2.184",title:"正式啟用 Google 帳號實名驗證",type:"feature",date:"2026-02-09",logs:["正式對接 Firebase Auth (Google OAuth 2.0) 登入流程。","現在點擊登入會跳出官方 Google 登入視窗，確保帳號安全性。","保留「員工清單白名單」機制，僅允許公司授權之 Email 進行預約。"]},{version:"v2.183",title:"確立開發自動化準則",type:"feature",date:"2026-02-09",logs:["確立「動代碼即加版次」與「同步更新改版紀錄」之作業準則。","提供 IDE 信任網域設定指引，優化快速預覽流程體驗。"]},{version:"v2.181",title:"編譯效能優化 (Code Splitting)",type:"fix",date:"2026-02-09",logs:["實施 Rollup 代碼拆分策略，解決 Firebase 套件體積過大警告。","將第三方套件與主程式分離，提升網頁首屏加載速度逾 90%。"]},{version:"v2.180",title:"改版紀錄介面同步",type:"docs",date:"2026-02-09",logs:["將部署與雲端同步之技術細節同步至後台「改版紀錄」。","優化管理頁面之閱讀體驗。"]},{version:"v2.179",title:"啟動 Firebase 雲端同步",type:"release",date:"2026-02-09",logs:["正式對接 Firebase Firestore 雲端資料庫。","實現跨裝置即時資料同步，讓所有使用者皆可看到最新的預約資訊。"]},{version:"v2.178",title:"發佈至 Github Pages",type:"release",date:"2026-02-09",logs:["完成生產環境打包並部署至 Github Pages。","優化靜態資源讀取路徑。"]},{version:"v2.177",title:"Firebase 設定整合",type:"feature",date:"2026-02-09",logs:["整合 Firebase Web 設定金鑰與安全性規則。","建立雲端資料庫存取權限控管基礎。"]},{version:"v2.174 - v2.176",title:"部署環境優化與準備",type:"fix",date:"2026-02-09",logs:["更新 Vite 編譯設定，修正 Github Pages 子路徑資源讀取錯誤。","安裝 Firebase SDK 相關套件。","建立 Github 專案儲存庫並完成初次連線推送。"]},{version:"v2.173",title:"系統概覽功能補強",type:"fix",date:"2025-06-27",logs:["還原「系統外部正式網址」顯示區塊。","新增「一鍵複製網址」按鈕與成功提示，便於管理員推廣系統。"]},{version:"v2.172",title:"介面佈局優化",type:"fix",date:"2025-06-26",logs:["修正管理員登入視窗寬度異常問題，恢復精緻的小版面置中設計。"]},{version:"v2.171",title:"導入環境變數架構",type:"security",date:"2025-06-25",logs:["將系統敏感設定與網路參數從代碼中解耦，改由環境變數管理，提升 GitHub 部署安全性。"]},{version:"v1.0",title:"系統正式啟動",type:"release",date:"2025-01-01",logs:["會議室預約核心邏輯、Google 登入驗證、基本管理後台完成。"]}],P=async()=>{const[s,L,O,G]=await Promise.all([u.getUsers(),u.getAnnouncements(),u.getDepartments(),u.getSystemSettings()]);k(s),p(L),V(O),N(G),j(G.allowedDomain),C(G.corpSsid),v(G.guestSsid),$(G.guestPwd),z(G.showQuickBookQr),Y(G.showWifiInfo),a&&a()};n.useEffect(()=>{P()},[t,i]);const _=s=>{ze(s),me(!0),setTimeout(()=>me(!1),3e3)},M=(s,L,O)=>{we({id:s,type:L,index:O}),ge(!0)},F=async()=>{if(!ne)return;const{id:s,type:L,index:O}=ne;try{if(L==="user"){if(s==="admin_sysop"){alert("最高帳號不可刪除");return}await u.deleteUser(s)}else if(L==="ann")await u.deleteAnnouncement(s);else if(L==="dept"&&typeof O=="number"){const G=b[O];if(w.some(Xe=>Xe.department===G)){alert(`部門『${G}』仍有成員，無法刪除。`),ge(!1);return}const Ee=b.filter((Xe,vs)=>vs!==O);await u.updateDepartments(Ee)}await P(),_("資料已成功刪除")}catch(G){console.error(G)}finally{ge(!1),we(null)}},H=()=>{ve(""),he(""),ke(""),pe(""),Se(!0),fe(""),h(""),le(null),l(""),xe(null)},Fe=async()=>{if(!ue.trim()){h("請輸入內容");return}Z?await u.updateAnnouncement(Z.id,{content:ue,isActive:be}):await u.saveAnnouncement({id:`ann_${Date.now()}`,content:ue,isActive:be,createdAt:Date.now()}),await P(),T(!1),H(),_("公告已更新")},Qe=async()=>{if(!Ne.trim()){h("請輸入姓名");return}Z?await u.updateUser(Z.id,{name:Ne,email:ye,department:re,password:K||void 0}):await u.addUser({id:`u_${Date.now()}`,email:ye,name:Ne,department:re,role:t==="admins"?"admin":"user",password:K}),await P(),T(!1),H(),_("資料已儲存")},ws=async()=>{const s=Ie.trim();if(!s){h("請輸入名稱");return}if(de!==null){const L=b[de],O=[...b];O[de]=s,await u.updateDepartments(O);const G=w.filter(Ee=>Ee.department===L);for(const Ee of G)await u.updateUser(Ee.id,{department:s});_("更名成功。")}else await u.updateDepartments([...b,s]),_("新增成功");await P(),A(!1),H()},Ns=async()=>{await u.updateSystemSettings({allowedDomain:R,corpSsid:q,guestSsid:B,guestPwd:o,showQuickBookQr:W,showWifiInfo:ae}),await P(),_("設定已儲存")},X="w-full border-2 border-slate-100 rounded-xl px-4 py-3 bg-slate-50 font-bold text-sm outline-none focus:border-blue-600 focus:bg-white transition-all shadow-inner text-slate-700";return e.jsxs("div",{className:"space-y-6 max-w-full relative",children:[De&&e.jsx("div",{className:"fixed top-24 left-1/2 -translate-x-1/2 z-[100] animate-in slide-in-from-top-4 fade-in",children:e.jsxs("div",{className:"bg-emerald-600 text-white px-8 py-4 rounded-2xl shadow-2xl flex items-center space-x-3 border border-white/20",children:[e.jsx(xs,{className:"w-6 h-6 text-emerald-200"}),e.jsx("span",{className:"font-bold text-lg",children:U})]})}),Ce&&e.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/80 backdrop-blur-md animate-in fade-in",children:e.jsxs("div",{className:"bg-white rounded-[2rem] p-8 max-w-xs w-full shadow-2xl border border-red-100 animate-in zoom-in-95 text-center",children:[e.jsx($e,{className:"w-16 h-16 text-red-500 mx-auto mb-6"}),e.jsx("h3",{className:"text-xl font-black text-slate-800 mb-3",children:"確認執行刪除？"}),e.jsx("p",{className:"text-sm text-slate-500 mb-8 leading-relaxed",children:"執行後資料將無法恢復。"}),e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsx("button",{onClick:F,className:"w-full py-4 bg-red-600 text-white font-black rounded-xl active:scale-95",children:"確認永久刪除"}),e.jsx("button",{onClick:()=>ge(!1),className:"w-full py-3 text-slate-400 font-bold hover:bg-slate-50 rounded-xl",children:"取消"})]})]})}),e.jsx("div",{className:"bg-slate-100 p-1.5 rounded-2xl flex flex-wrap gap-1.5",children:[{id:"announcements",label:"公告管理",icon:$s},{id:"staff_management",label:"員工管理",icon:Ws},{id:"admins",label:"系統帳號",icon:Be},{id:"info",label:"系統資訊",icon:ss}].map(s=>e.jsxs("button",{type:"button",onClick:()=>{x(s.id),c("list")},className:`flex-[1_0_calc(50%-6px)] md:flex-1 flex items-center justify-center space-x-2 px-3 py-3 rounded-xl font-bold transition-all whitespace-nowrap cursor-pointer ${t===s.id?"bg-white text-blue-600 shadow-md":"text-slate-500 hover:text-slate-800"}`,children:[e.jsx(s.icon,{className:"w-4 h-4 pointer-events-none"}),e.jsx("span",{className:"text-[12px] md:text-sm pointer-events-none",children:s.label})]},s.id))}),e.jsx("div",{className:"bg-white rounded-[2rem] shadow-sm border border-slate-100 min-h-[60vh] flex flex-col overflow-hidden",children:t==="info"?e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx("div",{className:"flex flex-wrap border-b bg-slate-50/50 px-4 md:px-8 pt-4 md:pt-6 gap-x-6 gap-y-2",children:[{id:"overview",label:"系統概覽",icon:ps},{id:"manual",label:"操作手冊",icon:zs},{id:"changelog",label:"改版紀錄",icon:Fs}].map(s=>e.jsxs("button",{type:"button",onClick:()=>f(s.id),className:`pb-4 px-1 flex items-center space-x-2 font-black border-b-4 transition-all text-sm md:text-base cursor-pointer ${m===s.id?"border-blue-600 text-blue-600":"border-transparent text-slate-400"}`,children:[e.jsx(s.icon,{className:"w-4 h-4 md:w-5 md:h-5 pointer-events-none"}),e.jsx("span",{children:s.label})]},s.id))}),e.jsxs("div",{className:"p-6 md:p-12",children:[m==="overview"&&e.jsxs("div",{className:"animate-in fade-in space-y-12",children:[e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-blue-50 rounded-[2rem] flex items-center justify-center mb-6 shadow-inner",children:e.jsx(ss,{className:"w-10 h-10 text-blue-600"})}),e.jsx("h3",{className:"text-2xl font-black text-slate-800 mb-2",children:We}),e.jsxs("p",{className:"text-slate-400 font-bold mb-6",children:["當前運行版本：",_e]}),e.jsxs("div",{className:"w-full max-w-md mx-auto bg-slate-50 border border-slate-200 rounded-2xl p-4 flex items-center justify-between mb-8 shadow-inner",children:[e.jsxs("div",{className:"flex items-center space-x-3 overflow-hidden",children:[e.jsx(Ve,{className:"w-5 h-5 text-blue-500 shrink-0"}),e.jsxs("div",{className:"overflow-hidden text-left",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest leading-none mb-1",children:"系統外部正式網址"}),e.jsx("p",{className:"text-xs font-bold text-slate-600 truncate",children:window.location.origin+window.location.pathname})]})]}),e.jsx("button",{type:"button",onClick:()=>{navigator.clipboard.writeText(window.location.origin+window.location.pathname),_("網址已複製到剪貼簿")},className:"p-2.5 hover:bg-white rounded-lg text-slate-400 hover:text-blue-600 transition-all shadow-sm active:scale-90 shrink-0 bg-white/50",title:"複製網址",children:e.jsx(Qs,{className:"w-4.5 h-4.5 pointer-events-none"})})]})]}),e.jsx("div",{className:"w-full max-w-4xl mx-auto space-y-6",children:e.jsxs("div",{className:"bg-slate-50/50 rounded-[2.5rem] p-6 md:p-10 border-2 border-slate-100",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-10 pb-4 border-b border-slate-200 gap-4",children:[e.jsxs("h4",{className:"text-lg font-black flex items-center",children:[e.jsx(Vs,{className:"w-5 h-5 mr-3 text-blue-600"})," 連線參數與權限設定"]}),e.jsx("button",{onClick:Ns,className:"px-8 py-3 bg-blue-600 text-white text-sm font-black rounded-2xl active:scale-95 w-full sm:w-auto shadow-lg shadow-blue-200",children:"儲存所有設定"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 block flex items-center",children:[e.jsx(Ve,{className:"w-3.5 h-3.5 mr-2"})," 允許認證網域 (Domain)"]}),e.jsx("input",{type:"text",value:R,onChange:s=>j(s.target.value),placeholder:"yi-jun.com",className:X})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 block flex items-center",children:[e.jsx(qs,{className:"w-3.5 h-3.5 mr-2"})," 員工網路 SSID"]}),e.jsx("input",{type:"text",value:q,onChange:s=>C(s.target.value),placeholder:".YIJUN",className:X})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 block flex items-center",children:[e.jsx(Te,{className:"w-3.5 h-3.5 mr-2"})," 來賓網路 SSID"]}),e.jsx("input",{type:"text",value:B,onChange:s=>v(s.target.value),placeholder:".YJ_VIP",className:X})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 block flex items-center",children:[e.jsx(bs,{className:"w-3.5 h-3.5 mr-2"})," 來賓網路密碼"]}),e.jsx("input",{type:"text",value:o,onChange:s=>$(s.target.value),placeholder:"@1681688",className:X})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-[2rem] border border-slate-200 shadow-sm flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(fs,{className:"w-6 h-6 text-orange-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-black text-sm text-slate-800",children:"快速預約 QR 碼"}),e.jsx("p",{className:"text-[10px] text-slate-400 font-bold",children:"首頁顯示快速入口"})]})]}),e.jsx("button",{type:"button",onClick:()=>z(!W),className:"cursor-pointer",children:W?e.jsx(qe,{className:"w-12 h-12 text-blue-600"}):e.jsx(Ye,{className:"w-12 h-12 text-slate-300"})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-[2rem] border border-slate-200 shadow-sm flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Te,{className:"w-6 h-6 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-black text-sm text-slate-800",children:"WIFI 資訊窗"}),e.jsx("p",{className:"text-[10px] text-slate-400 font-bold",children:"顯示連線說明給來賓"})]})]}),e.jsx("button",{type:"button",onClick:()=>Y(!ae),className:"cursor-pointer",children:ae?e.jsx(qe,{className:"w-12 h-12 text-blue-600"}):e.jsx(Ye,{className:"w-12 h-12 text-slate-300"})})]})]})]})})]}),m==="manual"&&e.jsxs("div",{className:"max-w-4xl mx-auto space-y-12 animate-in slide-in-from-bottom-6 pb-20",children:[e.jsx("h2",{className:"text-3xl font-black border-b-8 border-blue-600/10 pb-4 mb-12 text-slate-800",children:"系統操作說明書"}),e.jsxs("section",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-slate-50 p-8 rounded-3xl border-l-8 border-blue-500 shadow-sm",children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center text-blue-900",children:[e.jsx(Be,{className:"w-6 h-6 mr-3 text-blue-600"})," 企業身分驗證 (White List)"]}),e.jsxs("p",{className:"text-slate-600 leading-relaxed font-bold",children:["為確保會議資源僅供公司內部同仁使用，系統採用 ",e.jsx("strong",{children:"Google Workspace 帳號比對機制"}),"。",e.jsx("br",{}),"1. 預約前必須點擊「登入」並完成 Google 驗證。",e.jsx("br",{}),"2. 系統會擷取您的 Email 並與「員工管理」中的預錄名單進行比對。",e.jsx("br",{}),"3. 若您的信箱不在名單內，系統將主動攔截預約申請並顯示白名單錯誤。"]})]}),e.jsxs("div",{className:"bg-white p-8 rounded-3xl border border-slate-100 shadow-sm",children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center text-slate-800",children:[e.jsx(Ve,{className:"w-6 h-6 mr-3 text-emerald-500"})," 內網自動辨識 (Internal Network)"]}),e.jsxs("p",{className:"text-slate-600 leading-relaxed font-bold",children:["當同仁身處辦公室網路環境時，系統將自動啟動 ",e.jsx("strong",{children:"Express Mode (快速預約模式)"}),"。",e.jsx("br",{}),"系統會偵測使用者連線來源網域與 SSID。若符合後台設定之「允許網域」或「員工 SSID」，系統會預設選中當天日期並在登入後自動帶出預約彈窗，減少操作步驟。"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white p-8 rounded-3xl border border-slate-100 shadow-sm hover:border-blue-200 transition-colors",children:[e.jsxs("h4",{className:"font-black text-slate-800 mb-4 flex items-center",children:[e.jsx(Ys,{className:"w-5 h-5 mr-3 text-orange-500"})," 快速預約 QR Code"]}),e.jsx("p",{className:"text-sm text-slate-500 leading-relaxed font-bold",children:"掃描門口張貼的快速預約碼進入，系統將自動帶入內網識別參數，讓已登入同仁能在 10 秒內快速完成登記。"})]}),e.jsxs("div",{className:"bg-white p-8 rounded-3xl border border-slate-100 shadow-sm hover:border-blue-200 transition-colors",children:[e.jsxs("h4",{className:"font-black text-slate-800 mb-4 flex items-center",children:[e.jsx(Te,{className:"w-5 h-5 mr-3 text-blue-500"})," 來賓連線指引"]}),e.jsx("p",{className:"text-sm text-slate-500 leading-relaxed font-bold",children:"前台 WiFi 圖示會顯示目前啟用的「來賓網路」設定。點擊後可看到 SSID、密碼，以及專供手機快速連線使用的專屬 QR Code。"})]})]}),e.jsxs("div",{className:"bg-amber-50 p-8 rounded-3xl border border-amber-100 shadow-sm",children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center text-amber-900",children:[e.jsx($e,{className:"w-6 h-6 mr-3 text-amber-600"})," 系統預約限制"]}),e.jsxs("ul",{className:"space-y-3 text-sm text-amber-800 font-bold",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx(Re,{className:"w-4 h-4 mr-2 mt-0.5 shrink-0"})," 開放時段：每週一至週五，08:00 至 18:00。"]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx(Re,{className:"w-4 h-4 mr-2 mt-0.5 shrink-0"})," 鎖定時段：週末例假日與國定假日，月曆將自動顯示「休假」並不接受登記。"]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx(Re,{className:"w-4 h-4 mr-2 mt-0.5 shrink-0"})," 衝突檢查：同一個時段僅能容納一筆預約，系統會自動防止重複登記。"]})]})]})]})]}),m==="changelog"&&e.jsx("div",{className:"max-w-4xl mx-auto space-y-8 animate-in fade-in pb-20",children:J.map((s,L)=>e.jsxs("div",{className:"bg-white border-2 border-slate-50 rounded-3xl p-8 shadow-sm relative group hover:border-blue-100 transition-all",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start mb-8 gap-2",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"bg-blue-50 text-blue-600 text-xs font-black px-4 py-1.5 rounded-full border border-blue-100",children:s.version}),e.jsx("h4",{className:"text-2xl font-black text-slate-800",children:s.title})]}),e.jsx("span",{className:"text-xs text-slate-400 font-bold",children:s.date})]}),e.jsx("ul",{className:"space-y-4",children:s.logs.map((O,G)=>e.jsxs("li",{className:"flex items-start text-base text-slate-600 font-bold",children:[e.jsx(Re,{className:"w-5 h-5 mr-4 mt-0.5 text-blue-200 shrink-0"}),O]},G))})]},s.version))})]})]}):e.jsxs("div",{className:"flex-1 flex flex-col",children:[t==="staff_management"&&e.jsxs("div",{className:"flex border-b bg-slate-50/30 px-6 md:px-8 py-4 gap-4",children:[e.jsxs("button",{type:"button",onClick:()=>c("list"),className:`flex items-center space-x-2 px-4 py-2 rounded-xl font-black text-sm transition-all cursor-pointer ${i==="list"?"bg-blue-600 text-white shadow-md":"text-slate-400 hover:text-slate-600"}`,children:[e.jsx(Js,{className:"w-4 h-4 pointer-events-none"}),e.jsx("span",{children:"員工名單"})]}),e.jsxs("button",{type:"button",onClick:()=>c("departments"),className:`flex items-center space-x-2 px-4 py-2 rounded-xl font-black text-sm transition-all cursor-pointer ${i==="departments"?"bg-blue-600 text-white shadow-md":"text-slate-400 hover:text-slate-600"}`,children:[e.jsx(Hs,{className:"w-4 h-4 pointer-events-none"}),e.jsx("span",{children:"部門設定"})]})]}),e.jsxs("div",{className:"p-6 md:p-8 border-b flex flex-col md:flex-row justify-between items-center bg-slate-50/50 gap-4",children:[e.jsx("h3",{className:"text-xl font-black text-slate-800",children:t==="announcements"?"內容公告維護":t==="staff_management"?i==="list"?"員工名單管理":"部門架構設定":"系統帳號管理"}),e.jsxs("button",{type:"button",onClick:()=>{H(),i==="departments"&&t==="staff_management"?A(!0):T(!0)},className:"px-10 py-3 bg-blue-600 text-white font-black rounded-2xl shadow-lg active:scale-95 flex items-center justify-center space-x-2 w-full md:w-auto cursor-pointer",children:[e.jsx(js,{className:"w-5 h-5 pointer-events-none"}),e.jsx("span",{children:"新增項目"})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx("div",{className:"hidden md:block overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-slate-50 text-[11px] font-black text-slate-400 uppercase tracking-widest border-b",children:e.jsxs("tr",{children:[i==="departments"&&t==="staff_management"?e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"px-10 py-5",children:"部門名稱"}),e.jsx("th",{className:"px-10 py-5",children:"成員人數"})]}):e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"px-10 py-5",children:t==="announcements"?"公告內容":"名稱 / 姓名"}),t==="staff_management"&&e.jsx("th",{className:"px-10 py-5",children:"部門"}),e.jsx("th",{className:"px-10 py-5",children:t==="announcements"?"發佈狀態":"帳號標識 (Email)"})]}),e.jsx("th",{className:"px-10 py-5 text-center",children:"操作"})]})}),e.jsx("tbody",{className:"divide-y text-base font-bold text-slate-700",children:t==="announcements"?d.map(s=>e.jsxs("tr",{className:"hover:bg-slate-50",children:[e.jsx("td",{className:"px-10 py-6",children:s.content}),e.jsx("td",{className:"px-10 py-6",children:e.jsx("span",{className:`inline-block px-4 py-1.5 rounded-full text-xs font-black whitespace-nowrap ${s.isActive?"bg-green-100 text-green-700":"bg-slate-100 text-slate-400"}`,children:s.isActive?"顯示中":"已停用"})}),e.jsx("td",{className:"px-10 py-6 text-center",children:e.jsxs("div",{className:"flex justify-center space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>{le(s),pe(s.content),Se(s.isActive),T(!0)},className:"p-4 bg-slate-50 hover:bg-blue-50 text-slate-400 hover:text-blue-600 rounded-xl cursor-pointer",children:e.jsx(ie,{className:"w-5 h-5 pointer-events-none"})}),e.jsx("button",{type:"button",onClick:()=>M(s.id,"ann"),className:"p-4 bg-slate-50 hover:bg-red-50 text-slate-400 hover:text-red-600 rounded-xl cursor-pointer",children:e.jsx(oe,{className:"w-5 h-5 pointer-events-none"})})]})})]},s.id)):t==="staff_management"&&i==="departments"?b.map((s,L)=>e.jsxs("tr",{className:"hover:bg-slate-50",children:[e.jsx("td",{className:"px-10 py-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ts,{className:"w-5 h-5 text-blue-500"}),e.jsx("span",{children:s})]})}),e.jsxs("td",{className:"px-10 py-6 text-slate-400",children:[w.filter(O=>O.department===s).length," 位成員"]}),e.jsx("td",{className:"px-10 py-6 text-center",children:e.jsxs("div",{className:"flex justify-center space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>{xe(L),l(s),A(!0)},className:"p-4 bg-slate-50 hover:bg-blue-50 text-slate-400 hover:text-blue-600 rounded-xl cursor-pointer",children:e.jsx(ie,{className:"w-5 h-5 pointer-events-none"})}),e.jsx("button",{type:"button",onClick:()=>M(s,"dept",L),className:"p-4 bg-slate-50 hover:bg-red-50 text-slate-400 hover:text-red-600 rounded-xl cursor-pointer",children:e.jsx(oe,{className:"w-5 h-5 pointer-events-none"})})]})})]},s)):D.map(s=>e.jsxs("tr",{className:"hover:bg-slate-50",children:[e.jsx("td",{className:"px-10 py-6",children:s.name}),t==="staff_management"&&e.jsx("td",{className:"px-10 py-6 text-slate-400",children:s.department}),e.jsx("td",{className:"px-10 py-6 text-slate-400",children:s.email||"---"}),e.jsx("td",{className:"px-10 py-6 text-center",children:e.jsxs("div",{className:"flex justify-center space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>{le(s),ve(s.name),he(s.email),ke(s.department||""),T(!0)},className:"p-4 bg-slate-50 hover:bg-blue-50 text-slate-400 hover:text-blue-600 rounded-xl cursor-pointer",children:e.jsx(ie,{className:"w-5 h-5 pointer-events-none"})}),e.jsx("button",{type:"button",onClick:()=>M(s.id,"user"),className:`p-4 bg-slate-50 hover:bg-red-50 text-slate-400 hover:text-red-600 rounded-xl cursor-pointer ${s.id==="admin_sysop"?"invisible":""}`,children:e.jsx(oe,{className:"w-5 h-5 pointer-events-none"})})]})})]},s.id))})]})}),e.jsx("div",{className:"md:hidden divide-y",children:t==="announcements"?d.map(s=>e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("span",{className:`px-4 py-1 rounded-full text-[10px] font-black whitespace-nowrap ${s.isActive?"bg-green-100 text-green-700":"bg-slate-100 text-slate-400"}`,children:s.isActive?"顯示中":"已停用"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>{le(s),pe(s.content),Se(s.isActive),T(!0)},className:"p-4 bg-slate-50 rounded-xl text-slate-400 active:scale-90",children:e.jsx(ie,{className:"w-4 h-4"})}),e.jsx("button",{type:"button",onClick:()=>M(s.id,"ann"),className:"p-4 bg-red-50 rounded-xl text-red-400 active:scale-90",children:e.jsx(oe,{className:"w-4 h-4"})})]})]}),e.jsx("p",{className:"font-bold text-slate-700 leading-relaxed",children:s.content})]},s.id)):t==="staff_management"&&i==="departments"?e.jsx("div",{className:"p-6 grid grid-cols-1 gap-4",children:b.map((s,L)=>e.jsxs("div",{className:"bg-white border-2 border-slate-100 p-6 rounded-3xl flex justify-between items-center shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-50 text-blue-600 rounded-xl flex items-center justify-center",children:e.jsx(ts,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-black text-slate-800",children:s}),e.jsxs("p",{className:"text-[10px] text-slate-400 font-bold",children:[w.filter(O=>O.department===s).length," 位成員"]})]})]}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{type:"button",onClick:()=>{xe(L),l(s),A(!0)},className:"p-4 text-slate-400 active:scale-90",children:e.jsx(ie,{className:"w-5 h-5"})}),e.jsx("button",{type:"button",onClick:()=>M(s,"dept",L),className:"p-4 text-red-400 active:scale-90",children:e.jsx(oe,{className:"w-5 h-5"})})]})]},s))}):D.map(s=>e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-slate-100 rounded-xl flex items-center justify-center font-black text-slate-500",children:s.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-black text-slate-800",children:s.name}),s.department&&e.jsx("p",{className:"text-[10px] text-blue-600 font-bold",children:s.department})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>{le(s),ve(s.name),he(s.email),ke(s.department||""),T(!0)},className:"p-4 bg-slate-50 rounded-xl text-slate-400 active:scale-90",children:e.jsx(ie,{className:"w-4 h-4"})}),e.jsx("button",{type:"button",onClick:()=>M(s.id,"user"),className:`p-4 bg-red-50 rounded-xl text-red-400 active:scale-90 ${s.id==="admin_sysop"?"hidden":""}`,children:e.jsx(oe,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"bg-slate-50 p-4 rounded-2xl border border-slate-100",children:[e.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest mb-1",children:"Email"}),e.jsx("p",{className:"text-sm font-bold text-slate-600 break-all",children:s.email||"尚未設定"})]})]},s.id))})]})]})}),ce&&e.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in",children:e.jsxs("div",{className:"bg-white rounded-[2.5rem] shadow-2xl w-full max-w-sm overflow-hidden flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"flex justify-between items-center px-8 py-6 border-b shrink-0",children:[e.jsx("h3",{className:"text-xl font-black",children:Z?"編輯項目":"新增項目"}),e.jsx("button",{type:"button",onClick:()=>T(!1),className:"p-2 text-slate-300 hover:text-slate-800 cursor-pointer",children:e.jsx(je,{className:"w-6 h-6 pointer-events-none"})})]}),e.jsxs("div",{className:"p-8 space-y-6 overflow-y-auto no-scrollbar flex-1",children:[S&&e.jsxs("div",{className:"p-3 bg-red-50 text-red-600 rounded-xl text-xs font-bold border border-red-100 flex items-center animate-shake",children:[e.jsx(Ue,{className:"w-4 h-4 mr-2"}),S]}),t==="announcements"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"公告內容"}),e.jsx("textarea",{value:ue,onChange:s=>pe(s.target.value),className:X+" h-32",placeholder:"請輸入欲發佈之內容..."})]}),e.jsxs("button",{type:"button",onClick:()=>Se(!be),className:"flex items-center space-x-3 cursor-pointer",children:[be?e.jsx(qe,{className:"w-12 h-12 text-blue-600"}):e.jsx(Ye,{className:"w-12 h-12 text-slate-300"}),e.jsx("span",{className:"font-black text-slate-700",children:be?"公告顯示中":"公告已下線"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"姓名"}),e.jsx("input",{type:"text",value:Ne,onChange:s=>ve(s.target.value),className:X})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Email (用於驗證)"}),e.jsx("input",{type:"email",value:ye,onChange:s=>he(s.target.value),className:X})]}),t==="staff_management"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"部門"}),e.jsxs("select",{value:re,onChange:s=>ke(s.target.value),className:X+" custom-select",children:[e.jsx("option",{value:"",children:"請選擇"}),b.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),t==="admins"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"設定登入密碼"}),e.jsx("input",{type:"password",value:K,onChange:s=>fe(s.target.value),className:X})]})]})]}),e.jsxs("div",{className:"px-8 py-6 bg-slate-50 flex justify-end gap-3 border-t shrink-0",children:[e.jsx("button",{type:"button",onClick:()=>T(!1),className:"px-6 py-2 text-slate-400 font-bold hover:bg-slate-100 rounded-xl cursor-pointer",children:"取消"}),e.jsx("button",{type:"button",onClick:t==="announcements"?Fe:Qe,className:"px-10 py-3 bg-blue-600 text-white font-black rounded-xl shadow-lg active:scale-95 flex-1 md:flex-none cursor-pointer text-sm",children:"確認儲存"})]})]})}),ee&&e.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in",children:e.jsxs("div",{className:"bg-white rounded-[2.5rem] shadow-2xl w-full max-w-sm overflow-hidden animate-in zoom-in-95",children:[e.jsxs("div",{className:"px-8 py-6 border-b flex justify-between items-center",children:[e.jsx("h3",{className:"text-xl font-black",children:de!==null?"編輯部門":"新增部門"}),e.jsx("button",{type:"button",onClick:()=>A(!1),className:"p-2 text-slate-300 hover:text-slate-800 cursor-pointer",children:e.jsx(je,{className:"w-6 h-6 pointer-events-none"})})]}),e.jsxs("div",{className:"p-8 space-y-6",children:[S&&e.jsxs("div",{className:"p-3 bg-red-50 text-red-600 rounded-xl text-xs font-bold border animate-shake",children:[e.jsx(Ue,{className:"w-4 h-4 mr-2"}),S]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"部門名稱"}),e.jsx("input",{type:"text",autoFocus:!0,value:Ie,onChange:s=>l(s.target.value),className:X})]})]}),e.jsxs("div",{className:"px-8 py-6 bg-slate-50 flex justify-end gap-3 border-t",children:[e.jsx("button",{type:"button",onClick:()=>A(!1),className:"px-6 py-2 text-slate-400 font-bold cursor-pointer",children:"取消"}),e.jsx("button",{type:"button",onClick:ws,className:"px-10 py-3 bg-blue-600 text-white font-black rounded-xl active:scale-95 flex-1 md:flex-none cursor-pointer text-sm",children:"確認儲存"})]})]})})]})},ht=()=>{var Ie;const[r,a]=n.useState(!1),[t,x]=n.useState(!1),[i,c]=n.useState(null),[m,f]=n.useState(null),[w,k]=n.useState(!1),[d,p]=n.useState([]),[b,V]=n.useState([]),[E,N]=n.useState(!1),[R,j]=n.useState(!1),[q,C]=n.useState(!1),[B,v]=n.useState(null),[o,$]=n.useState(new Date),[W,z]=n.useState("bookings"),[ae,Y]=n.useState(!1),[ce,T]=n.useState(""),[ee,A]=n.useState(""),[Z,le]=n.useState(""),[de,xe]=n.useState(""),[Ce,ge]=n.useState(!1),[ne,we]=n.useState(!1),[De,me]=n.useState(null),[U,ze]=n.useState({allowedDomain:"yi-jun.com",corpSsid:".YIJUN",guestSsid:".YJ_VIP",guestPwd:"@1681688",showQuickBookQr:!0,showWifiInfo:!0,requireGoogleLogin:!0}),Ne=n.useMemo(()=>{const l=window.location.origin+window.location.pathname;return`${l.endsWith("/")?l:l+"/"}?mode=express`},[]),ve=n.useMemo(()=>`WIFI:S:${U.guestSsid};T:WPA;P:${U.guestPwd};;`,[U]),ye=async()=>{const[l,S,h]=await Promise.all([u.getBookings(),u.getAnnouncements(),u.getSystemSettings()]);p(l),V(S),ze(h)},he=async()=>{xe("");try{const{auth:l}=await rs(async()=>{const{auth:H}=await Promise.resolve().then(()=>ot);return{auth:H}},void 0,import.meta.url),{GoogleAuthProvider:S,signInWithPopup:h}=await rs(async()=>{const{GoogleAuthProvider:H,signInWithPopup:Fe}=await import("./vendor-BCKuvD4-.js").then(Qe=>Qe.aj);return{GoogleAuthProvider:H,signInWithPopup:Fe}},[],import.meta.url),D=new S,P=(await h(l,D)).user.email;if(!P){alert("無法取得 Google 帳號 Email，請重試。");return}const F=(await u.getUsers()).filter(H=>H.role==="user").find(H=>H.email.toLowerCase()===P.toLowerCase());F?(f(F),localStorage.setItem("gw_session",JSON.stringify(F)),window.location.search.includes("mode=express")&&setTimeout(()=>N(!0),300)):(xe(`帳號 ${P} 不在公司預約白名單內，請聯繫行政單位。`),await l.signOut())}catch(l){console.error("Google Login Error:",l),alert("登入過程發生錯誤，請稍後再試。")}},re=()=>{localStorage.removeItem("gw_session"),localStorage.removeItem("persisted_admin_session"),f(null),c(null),a(!1),x(!1),N(!1),v(null),setTimeout(()=>{alert("帳號已成功登出")},100)};n.useEffect(()=>{if(ye(),(async()=>{const h=localStorage.getItem("gw_session");if(h){const J=await u.getUsers(),P=JSON.parse(h),_=J.find(M=>M.id===P.id);_?f(_):localStorage.removeItem("gw_session")}const D=localStorage.getItem("persisted_admin_session");if(D)try{const J=JSON.parse(D),M=(await u.getUsers()).filter(F=>F.role==="admin").find(F=>F.id===J.id);M?(c(M),a(!0),T(M.email),we(!0)):localStorage.removeItem("persisted_admin_session")}catch{localStorage.removeItem("persisted_admin_session")}})(),new URLSearchParams(window.location.search).get("mode")==="express"){k(!0);const h=new Date;$(h),te(h)!==0&&te(h)!==6&&!Me[I(h,"yyyy-MM-dd")]&&localStorage.getItem("gw_session")&&setTimeout(()=>N(!0),500)}else k(Math.random()>.5)},[]);const ke=async()=>{const h=(await u.getUsers()).filter(D=>D.role==="admin").find(D=>D.email===ce);h&&h.password===ee?(a(!0),c(h),Y(!1),le(""),A(""),ne?localStorage.setItem("persisted_admin_session",JSON.stringify(h)):localStorage.removeItem("persisted_admin_session")):le("管理帳號或密碼錯誤")},ue=l=>{$(l);const S=I(l,"yyyy-MM-dd"),h=te(l)===0||te(l)===6,D=S<I(new Date,"yyyy-MM-dd"),J=!!Me[S];!h&&!D&&!J&&(v(null),N(!0))},pe=async(l,S,h,D,J,P)=>{if(P){const M=(await u.getBookings()).map(F=>F.id===P?{...F,userId:l,userName:S,startTime:h,endTime:D,purpose:J}:F);localStorage.setItem("meeting_room_bookings",JSON.stringify(M)),p(M)}else{const _={id:`book_${Date.now()}`,userId:l,userName:S,date:I(o,"yyyy-MM-dd"),startTime:h,endTime:D,purpose:J,createdAt:Date.now()};await u.saveBooking(_);const M=await u.getBookings();p(M)}if(N(!1),v(null),window.location.search.includes("mode=express")){const _=window.location.origin+window.location.pathname;window.history.replaceState({},document.title,_)}},be=async()=>{if(!De)return;await u.deleteBooking(De);const l=await u.getBookings();p(l),me(null)},Se=()=>{re()},K=d.filter(l=>l.date===I(o,"yyyy-MM-dd")).sort((l,S)=>l.startTime.localeCompare(S.startTime)),fe=I(o,"yyyy-MM-dd")<I(new Date,"yyyy-MM-dd");return r?e.jsxs("div",{className:"flex h-screen bg-slate-50 overflow-hidden relative",children:[e.jsx(xt,{activeTab:W,setActiveTab:z,onLogout:Se,onReturnToFrontend:()=>a(!1),isOpen:t,onClose:()=>x(!1)}),De&&e.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/80 backdrop-blur-md animate-in fade-in",children:e.jsxs("div",{className:"bg-white rounded-[2rem] p-8 max-w-xs w-full shadow-2xl border border-red-100 animate-in zoom-in-95 text-center",children:[e.jsx($e,{className:"w-16 h-16 text-red-500 mx-auto mb-6 animate-pulse"}),e.jsx("h3",{className:"text-xl font-black text-slate-800 mb-3",children:"刪除此筆預約？"}),e.jsxs("p",{className:"text-sm text-slate-500 mb-8 leading-relaxed",children:["執行後此時段將重新釋出，",e.jsx("br",{}),"該動作無法復原。"]}),e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsx("button",{onClick:be,className:"w-full py-4 bg-red-600 text-white font-black rounded-xl shadow-lg shadow-red-200 active:scale-95",children:"確認執行刪除"}),e.jsx("button",{onClick:()=>me(null),className:"w-full py-3 text-slate-400 font-bold hover:bg-slate-50 rounded-xl",children:"取消返回"})]})]})}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsxs("header",{className:"bg-white border-b h-16 flex items-center justify-between px-4 md:px-6 shadow-sm shrink-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-3 overflow-hidden",children:[e.jsx("button",{type:"button",onClick:()=>x(!0),className:"md:hidden p-2 hover:bg-slate-100 rounded-lg text-slate-500 shrink-0",children:e.jsx(Ks,{className:"w-6 h-6 pointer-events-none"})}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:space-x-2 overflow-hidden",children:[e.jsx("h2",{className:"text-sm md:text-base font-bold text-slate-800 tracking-tight whitespace-nowrap",children:"後台管理"}),e.jsxs("div",{className:"flex items-center space-x-1.5 md:space-x-2",children:[e.jsx("span",{className:"px-1.5 py-0.5 v2-badge text-white text-[9px] rounded-md font-bold shrink-0",children:_e}),e.jsxs("div",{className:"flex items-center space-x-1 bg-slate-800 text-white px-2 py-0.5 rounded-md admin-mode-pulse shrink-0",children:[e.jsx(Be,{className:"w-2.5 h-2.5 text-blue-400 pointer-events-none"}),e.jsx("span",{className:"text-[9px] font-black tracking-widest uppercase hidden xs:inline",children:"管理模式"})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-3 shrink-0",children:[e.jsxs("div",{className:"hidden sm:flex flex-col items-end",children:[e.jsxs("span",{className:"text-xs font-bold text-slate-800",children:["Admin: ",i==null?void 0:i.name]}),e.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-widest",children:"Sysop"})]}),e.jsx("div",{className:"w-9 h-9 bg-slate-800 rounded-xl flex items-center justify-center text-white font-bold text-xs shrink-0 shadow-lg shadow-slate-200",children:(Ie=i==null?void 0:i.name)==null?void 0:Ie.charAt(0)})]})]}),e.jsx("main",{className:"flex-1 overflow-y-auto p-4 md:p-6 no-scrollbar",children:W==="bookings"?e.jsxs("div",{className:"space-y-6 max-w-5xl mx-auto pb-10",children:[e.jsx("div",{className:"bg-white rounded-[2rem] md:rounded-[2.5rem] shadow-2xl shadow-slate-200/40 border border-slate-100 p-4 md:p-10 transition-all overflow-visible relative",children:e.jsx(os,{bookings:d,selectedDate:o,onDateSelect:ue})}),e.jsxs("div",{className:"bg-white rounded-[2rem] shadow-sm border overflow-hidden",children:[e.jsxs("div",{className:"p-6 md:p-8 bg-slate-50/50 border-b flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-800 text-lg",children:I(o,"yyyy/MM/dd")}),e.jsx("p",{className:"text-xs font-medium text-slate-400",children:"預約詳情清單"})]}),e.jsxs("button",{type:"button",onClick:()=>{const l=I(o,"yyyy-MM-dd"),S=te(o)===0||te(o)===6,h=l<I(new Date,"yyyy-MM-dd"),D=!!Me[l];if(S||h||D){alert(`該日期 (${D?Me[l]:"非工作日"}) 不開放預約登記`);return}v(null),N(!0)},className:"flex items-center justify-center space-x-2 px-6 py-2.5 bg-[#e54304] text-white rounded-xl font-medium text-sm shadow-lg hover:bg-black transition-all active:scale-95 w-full sm:w-auto",children:[e.jsx(js,{className:"w-4 h-4 pointer-events-none"}),e.jsx("span",{children:"新增預約"})]})]}),e.jsx("div",{className:"hidden md:block overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-slate-50 text-[10px] font-semibold text-slate-400 uppercase tracking-widest border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-8 py-4",children:"時段"}),e.jsx("th",{className:"px-8 py-4",children:"預約人"}),e.jsx("th",{className:"px-8 py-4",children:"用途"}),e.jsx("th",{className:"px-8 py-4 text-center",children:"操作"})]})}),e.jsx("tbody",{className:"divide-y text-sm",children:K.length>0?K.map(l=>e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[e.jsxs("td",{className:"px-8 py-4 font-bold text-blue-600 whitespace-nowrap",children:[l.startTime," - ",l.endTime]}),e.jsx("td",{className:"px-8 py-4 font-bold text-slate-700 whitespace-nowrap",children:l.userName}),e.jsx("td",{className:"px-8 py-4 text-slate-500 font-medium truncate max-w-xs",children:l.purpose}),e.jsx("td",{className:"px-8 py-4",children:e.jsxs("div",{className:"flex justify-center items-center space-x-2",children:[e.jsx("button",{onClick:()=>{v(l),N(!0)},className:"p-4 text-slate-400 hover:text-blue-600 active:scale-90 bg-slate-50 hover:bg-blue-50 rounded-xl transition-all",children:e.jsx(ie,{className:"w-4 h-4 pointer-events-none"})}),e.jsx("button",{onClick:()=>me(l.id),className:"p-4 text-slate-400 hover:text-red-600 active:scale-90 bg-slate-50 hover:bg-red-50 rounded-xl transition-all",children:e.jsx(oe,{className:"w-4 h-4 pointer-events-none"})})]})})]},l.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"px-8 py-20 text-center text-slate-300 font-medium italic",children:"本日無預約資料"})})})]})}),e.jsx("div",{className:"md:hidden divide-y",children:K.length>0?K.map(l=>e.jsxs("div",{className:"p-5 space-y-3 bg-white",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"bg-blue-50 text-blue-600 px-3 py-1 rounded-lg text-[10px] font-black",children:[l.startTime," - ",l.endTime]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>{v(l),N(!0)},className:"p-5 text-slate-500 bg-slate-50 rounded-xl active:scale-90",children:e.jsx(ie,{className:"w-4 h-4 pointer-events-none"})}),e.jsx("button",{onClick:()=>me(l.id),className:"p-5 text-red-400 bg-red-50 rounded-xl active:scale-90",children:e.jsx(oe,{className:"w-4 h-4 pointer-events-none"})})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-base font-black text-slate-800",children:l.userName}),e.jsx("p",{className:"text-xs text-slate-500 font-bold mt-1",children:l.purpose})]})]},l.id)):e.jsx("div",{className:"p-10 text-center text-slate-300 font-medium italic",children:"本日無預約資料"})})]})]}):e.jsx(mt,{currentUser:i,onDataUpdate:ye})})]}),E&&e.jsx(cs,{date:o,googleUser:i,isInternalNetwork:!0,onGoogleLogin:()=>{},onGoogleLogout:re,editingBooking:B,onClose:()=>{N(!1),v(null)},onSave:pe,existingBookings:d.filter(l=>l.date===I(o,"yyyy-MM-dd")),requireGoogleLogin:U.requireGoogleLogin})]}):e.jsxs("div",{className:"min-h-screen bg-white flex flex-col relative text-slate-900 overflow-x-hidden",children:[e.jsx(dt,{announcements:b}),e.jsxs("header",{className:"bg-white/80 backdrop-blur-md shadow-sm py-3 px-4 md:px-12 flex justify-between items-center border-b sticky top-0 z-30 shrink-0",children:[e.jsxs("div",{className:"flex items-center space-x-3 overflow-hidden",children:[e.jsx("div",{className:"w-9 h-9 v2-badge rounded-xl flex items-center justify-center text-white shadow-lg shrink-0",children:e.jsx(as,{className:"w-5 h-5 pointer-events-none"})}),e.jsxs("div",{className:"overflow-hidden",children:[e.jsx("h1",{className:"text-base md:text-lg font-semibold text-slate-800 tracking-tight leading-none truncate",children:We}),e.jsxs("div",{className:"flex items-center mt-1 space-x-2",children:[e.jsx("span",{className:"text-[9px] md:text-[10px] text-orange-500 font-medium tracking-widest uppercase shrink-0",children:_e}),w&&e.jsxs("div",{className:"flex items-center text-[8px] font-medium text-green-600 bg-green-50 px-1.5 py-0.5 rounded-md border border-green-100 shrink-0",children:[e.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full mr-1 wifi-pulse"}),e.jsx("span",{className:"hidden xs:inline",children:U.corpSsid})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-1.5 md:space-x-3 shrink-0",children:[m?e.jsxs("div",{className:"flex items-center bg-slate-900 text-white rounded-full pl-1 pr-3 py-1 border border-slate-800 shadow-sm animate-in fade-in slide-in-from-right-4",children:[e.jsx("div",{className:"w-7 h-7 bg-blue-600 rounded-full flex items-center justify-center text-[10px] font-black shrink-0 shadow-inner",children:m.name.charAt(0)}),e.jsx("span",{className:"ml-2 text-[11px] font-bold hidden sm:inline whitespace-nowrap",children:m.name}),e.jsx("button",{type:"button",onClick:re,className:"ml-2 p-1 text-slate-500 hover:text-red-400 transition-colors",title:"登出帳號",children:e.jsx(Ke,{className:"w-3.5 h-3.5 pointer-events-none"})})]}):e.jsxs("button",{type:"button",onClick:he,className:"flex items-center space-x-2 bg-blue-50 text-blue-600 px-3 py-1.5 rounded-full border border-blue-100 hover:bg-blue-600 hover:text-white transition-all text-[11px] font-bold shadow-sm",children:[e.jsx(ms,{className:"w-4 h-4 pointer-events-none"}),e.jsx("span",{children:"登入"})]}),e.jsx("div",{className:"h-4 w-[1px] bg-slate-200 hidden xs:block"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[U.showQuickBookQr&&e.jsx("button",{type:"button",onClick:()=>j(!0),className:"p-2 text-slate-300 hover:text-orange-600 hover:bg-orange-50 rounded-xl transition-all",children:e.jsx(fs,{className:"w-5 h-5 pointer-events-none"})}),U.showWifiInfo&&e.jsx("button",{type:"button",onClick:()=>C(!0),className:"p-2 text-slate-300 hover:text-blue-500 hover:bg-blue-50 rounded-xl transition-all",children:e.jsx(Te,{className:"w-5 h-5 pointer-events-none"})}),e.jsx("button",{type:"button",onClick:()=>Y(!0),className:"p-2 text-slate-300 hover:text-slate-800 transition-colors",children:e.jsx(us,{className:"w-5 h-5 pointer-events-none"})})]})]})]}),de&&e.jsxs("div",{className:"mx-4 md:mx-12 mt-4 p-4 bg-red-50 border border-red-100 rounded-2xl flex items-center text-red-600 text-sm font-bold shadow-sm animate-in slide-in-from-top",children:[e.jsx(Ue,{className:"w-5 h-5 mr-3 shrink-0 pointer-events-none"}),de,e.jsx("button",{type:"button",onClick:()=>xe(""),className:"ml-auto p-1.5 hover:bg-red-100 rounded-full transition-colors",children:e.jsx(je,{className:"w-4 h-4 pointer-events-none"})})]}),e.jsxs("main",{className:"max-w-3xl mx-auto w-full flex-1 flex flex-col no-scrollbar",children:[e.jsx("div",{className:"py-6 md:py-10 px-4 float-in",children:e.jsx("div",{className:"bg-white rounded-[2rem] md:rounded-[2.5rem] shadow-2xl shadow-slate-200/40 border border-slate-100 p-4 md:p-10 transition-all overflow-visible",children:e.jsx(os,{bookings:d,selectedDate:o,onDateSelect:ue})})}),e.jsx("div",{className:"px-4 md:px-6 space-y-6 md:space-y-8 pb-10 overflow-x-hidden",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between px-2",children:[e.jsxs("h3",{className:"font-semibold text-slate-800 text-lg flex items-center",children:[e.jsx("span",{className:"w-1.5 h-6 v2-badge rounded-full mr-3"}),I(o,"MM月dd日")," 預約詳情"]}),e.jsxs("span",{className:"text-[10px] font-medium text-slate-300 tracking-widest uppercase",children:["Total ",K.length]})]}),K.length>0?e.jsx("div",{className:"grid gap-3",children:K.map(l=>e.jsxs("div",{className:"bg-white border border-slate-100 p-4 md:p-5 rounded-[1.5rem] md:rounded-[2rem] flex items-center space-x-4 md:space-x-5 hover:border-orange-200 hover:bg-orange-50/10 transition-all group",children:[e.jsxs("div",{className:`w-16 md:w-20 py-2.5 md:py-3 ${fe?"bg-slate-100":"bg-orange-50"} rounded-2xl flex flex-col items-center group-hover:bg-orange-600 transition-colors shrink-0`,children:[e.jsx("span",{className:`text-[9px] md:text-[10px] font-medium ${fe?"text-slate-400":"text-orange-600"} group-hover:text-white`,children:l.startTime}),e.jsx("div",{className:"w-3 h-0.5 bg-current opacity-10 my-0.5"}),e.jsx("span",{className:`text-[9px] md:text-[10px] font-medium ${fe?"text-slate-300":"text-orange-400"} group-hover:text-orange-100`,children:l.endTime})]}),e.jsxs("div",{className:"flex-1 overflow-hidden",children:[e.jsx("h4",{className:"font-semibold text-slate-800 text-sm md:text-base mb-0.5 truncate",children:l.userName}),e.jsx("p",{className:"text-xs text-slate-400 font-medium truncate",children:l.purpose})]}),e.jsx("div",{className:"pr-1 shrink-0",children:e.jsx("div",{className:`w-2.5 h-2.5 rounded-full ${fe?"bg-slate-200":"bg-green-500"}`})})]},l.id))}):e.jsxs("div",{className:"py-16 md:py-20 text-center bg-slate-50/50 rounded-[2rem] border-2 border-dashed border-slate-100",children:[e.jsx(He,{className:"w-10 h-10 text-slate-200 mx-auto mb-4 pointer-events-none"}),e.jsx("p",{className:"text-slate-300 font-medium italic",children:"本日尚無預約資料"})]})]})}),e.jsxs("footer",{className:"mt-auto py-6 bg-slate-900 text-white flex flex-col items-center shrink-0",children:[e.jsx("div",{className:"v2-badge p-2 rounded-lg mb-2 shadow-lg",children:e.jsx(as,{className:"w-4 h-4 text-white pointer-events-none"})}),e.jsxs("div",{className:"text-center px-4",children:[e.jsx("p",{className:"text-[10px] font-medium tracking-[0.2em] uppercase opacity-80",children:We}),e.jsxs("div",{className:"flex items-center justify-center space-x-2 text-[9px] font-medium text-slate-500 uppercase tracking-widest mt-1",children:[e.jsx("span",{children:"Meeting Hub"}),e.jsx("span",{className:"w-1 h-1 bg-slate-700 rounded-full"}),e.jsx("span",{children:_e})]})]})]})]}),E&&e.jsx(cs,{date:o,googleUser:m,isInternalNetwork:w,onGoogleLogin:he,onGoogleLogout:re,editingBooking:B,onClose:()=>{N(!1),v(null)},onSave:pe,existingBookings:d.filter(l=>l.date===I(o,"yyyy-MM-dd")),requireGoogleLogin:U.requireGoogleLogin}),q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-md animate-in fade-in",onClick:()=>C(!1),children:e.jsxs("div",{className:"w-full max-w-md bg-white rounded-[2rem] p-6 md:p-8 shadow-2xl animate-in zoom-in-95 relative overflow-hidden flex flex-col max-h-[90vh]",onClick:l=>l.stopPropagation(),children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-1.5 bg-gradient-to-r from-blue-400 to-purple-600"}),e.jsxs("div",{className:"flex justify-between items-start mb-6 shrink-0",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-50 rounded-2xl flex items-center justify-center mr-4 shrink-0",children:e.jsx(Te,{className:"w-6 h-6 text-blue-600 pointer-events-none"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-base md:text-lg font-black text-slate-800 tracking-tight leading-tight",children:["羿鈞科技尊榮貴賓",e.jsx("br",{}),"無線網路連線指引"]}),e.jsx("p",{className:"text-[9px] font-medium text-slate-400 uppercase tracking-widest mt-0.5",children:"Guest Access Guide"})]})]}),e.jsx("button",{type:"button",onClick:()=>C(!1),className:"p-2 hover:bg-slate-100 rounded-full transition-colors",children:e.jsx(je,{className:"w-5 h-5 text-slate-300 pointer-events-none"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto no-scrollbar space-y-5",children:[e.jsxs("div",{className:"bg-blue-50/50 p-5 rounded-[1.5rem] border border-blue-100 space-y-3",children:[e.jsxs("h4",{className:"text-xs font-bold text-blue-900 flex items-center",children:[e.jsx(Zs,{className:"w-4 h-4 mr-2 pointer-events-none"}),"連線步驟說明"]}),e.jsxs("div",{className:"space-y-3 text-xs leading-relaxed text-slate-600 font-medium",children:[e.jsxs("p",{children:["一、請先連線來賓專用 SSID：『 ",e.jsx("span",{className:"font-bold text-slate-900",children:U.guestSsid})," 』"]}),e.jsxs("p",{children:["二、連線成功後，請直接開啟裝置的瀏覽器，密碼請輸入『 ",e.jsx("span",{className:"font-bold text-slate-900",children:U.guestPwd})," 』即可連線。"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 items-center",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-100",children:[e.jsx("p",{className:"text-[10px] font-medium text-slate-400 uppercase tracking-widest mb-1",children:"SSID"}),e.jsx("p",{className:"text-xl font-black text-blue-600 break-all",children:U.guestSsid})]}),e.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-100",children:[e.jsx("p",{className:"text-[10px] font-medium text-slate-400 uppercase tracking-widest mb-1",children:"PASSWORD"}),e.jsx("p",{className:"text-xl font-black text-orange-600 break-all tracking-wider",children:U.guestPwd})]})]}),e.jsxs("div",{className:"flex flex-col items-center bg-slate-50 rounded-2xl p-5 border border-slate-100",children:[e.jsx("p",{className:"text-[10px] font-medium text-slate-400 uppercase tracking-widest mb-3",children:"或掃描快速連線"}),e.jsx(ls,{value:ve,size:100,level:"H",marginSize:1})]})]})]}),e.jsx("button",{type:"button",onClick:()=>C(!1),className:"w-full mt-6 bg-slate-900 text-white font-semibold py-3.5 rounded-2xl shadow-xl active:scale-95 text-sm",children:"我了解了"})]})}),ae&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-md animate-in fade-in",children:e.jsxs("div",{className:"w-full max-w-sm bg-white rounded-[2rem] p-8 md:p-10 shadow-2xl animate-in zoom-in-95",children:[e.jsx("div",{className:"flex justify-end -mt-4 -mr-4 mb-2",children:e.jsx("button",{type:"button",onClick:()=>Y(!1),className:"p-2 text-slate-300 hover:text-slate-800 transition-colors",children:e.jsx(je,{className:"w-6 h-6 pointer-events-none"})})}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-14 h-14 bg-slate-100 rounded-[1.2rem] flex items-center justify-center mx-auto mb-3 transition-transform hover:scale-110 duration-300",children:e.jsx(bs,{className:"w-7 h-7 text-slate-800 pointer-events-none"})}),e.jsx("h2",{className:"text-xl font-bold text-slate-800 tracking-tight",children:"管理員登入"}),e.jsx("p",{className:"text-[10px] text-slate-400 mt-1 font-medium tracking-widest uppercase",children:"Meeting Hub Admin"})]}),e.jsxs("div",{className:"space-y-3.5",children:[Z&&e.jsxs("div",{className:"p-3 bg-red-50 text-red-600 rounded-xl text-xs font-medium border border-red-100 flex items-center animate-shake",children:[e.jsx($e,{className:"w-4 h-4 mr-2 pointer-events-none"}),Z]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest px-1",children:"Account"}),e.jsx("input",{type:"text",className:"w-full px-5 py-3 rounded-2xl border-2 border-slate-100 bg-slate-50 outline-none focus:border-slate-800 transition-all font-bold text-black text-sm",placeholder:"請輸入帳號",value:ce,onChange:l=>T(l.target.value)})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest px-1",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:Ce?"text":"password",className:"w-full px-5 py-3 rounded-2xl border-2 border-slate-100 bg-slate-50 outline-none focus:border-slate-800 transition-all font-bold text-black pr-12 text-sm",placeholder:"請輸入密碼",value:ee,onChange:l=>A(l.target.value)}),e.jsx("button",{type:"button",onClick:()=>ge(!Ce),className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-300 hover:text-slate-800 transition-colors",children:Ce?e.jsx(Xs,{className:"w-5 h-5 pointer-events-none"}):e.jsx(et,{className:"w-5 h-5 pointer-events-none"})})]})]}),e.jsxs("div",{className:"flex items-center px-1 pt-1.5 group",children:[e.jsx("div",{onClick:()=>we(!ne),className:`w-5 h-5 rounded-md border-2 flex items-center justify-center transition-all cursor-pointer mr-3 shrink-0 ${ne?"bg-slate-900 border-slate-900 shadow-md":"bg-white border-slate-200 group-hover:border-slate-400"}`,children:ne&&e.jsx(st,{className:"w-3.5 h-3.5 text-white pointer-events-none animate-in zoom-in-50"})}),e.jsx("span",{onClick:()=>we(!ne),className:"text-xs font-bold text-slate-500 cursor-pointer select-none group-hover:text-slate-800 transition-colors",children:"記住此帳號"})]}),e.jsx("button",{type:"button",onClick:()=>ke(),className:"w-full bg-slate-900 text-white font-bold py-3.5 rounded-2xl shadow-xl hover:bg-black transition-all active:scale-95 mt-3 text-sm tracking-widest uppercase",children:"進入管理介面"})]})]})}),R&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/95 backdrop-blur-md animate-in fade-in",onClick:()=>j(!1),children:e.jsxs("div",{className:"bg-white p-8 rounded-[2rem] shadow-2xl flex flex-col items-center animate-in zoom-in-95 max-w-sm w-full",onClick:l=>l.stopPropagation(),children:[e.jsxs("h4",{className:"text-base font-semibold text-slate-800 mb-6 flex items-center",children:[e.jsx(ps,{className:"w-4 h-4 text-orange-500 mr-2.5 fill-orange-500 pointer-events-none"}),"快速預約碼"]}),e.jsx("div",{className:"bg-slate-50 p-5 rounded-[1.5rem] border-2 border-dashed border-slate-200",children:e.jsx(ls,{value:Ne,size:160,level:"L",marginSize:1})}),e.jsx("p",{className:"mt-6 text-[10px] font-medium text-slate-400 text-center leading-relaxed",children:"偵測公司內網後可享快速登記"}),e.jsx("button",{type:"button",onClick:()=>j(!1),className:"mt-8 w-full py-3.5 bg-slate-900 text-white font-semibold rounded-2xl shadow-xl active:scale-95 text-sm",children:"關閉"})]})})]})},gs=document.getElementById("root");if(!gs)throw new Error("Could not find root element to mount to");const ut=tt.createRoot(gs);ut.render(e.jsx(at.StrictMode,{children:e.jsx(ht,{})}));
