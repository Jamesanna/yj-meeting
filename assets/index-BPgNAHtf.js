import{i as Gt,g as _t,a as $t,q as Ot,l as Pt,c as X,b as $e,d as Me,e as Q,u as Ke,f as Ue,s as Oe,h as Wt,j as e,r as l,k as Ft,m as Y,n as Rt,o as Bt,C as zt,p as m,z as Ut,t as bt,v as Qt,w as Vt,x as qt,y as lt,B as Ht,A as Yt,D as ot,X as Ne,E as Ve,S as qe,F as ft,L as nt,M as Jt,G as gt,H as jt,I as Kt,J as Zt,K as wt,N as Xt,O as He,P as es,U as ts,Q as ss,R as ct,Z as Nt,T as as,V as ls,W as Ze,Y as ns,_ as is,$ as rs,a0 as We,a1 as vt,a2 as yt,a3 as Xe,a4 as et,a5 as os,a6 as Qe,a7 as cs,a8 as ds,a9 as tt,aa as kt,ab as oe,ac as ce,ad as xs,ae as dt,af as ms,ag as xt,ah as ps,ai as hs,aj as us,ak as bs,al as fs,am as gs,an as js}from"./vendor-D13XhF8o.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))p(r);new MutationObserver(r=>{for(const d of r)if(d.type==="childList")for(const w of d.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&p(w)}).observe(document,{childList:!0,subtree:!0});function i(r){const d={};return r.integrity&&(d.integrity=r.integrity),r.referrerPolicy&&(d.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?d.credentials="include":r.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function p(r){if(r.ep)return;r.ep=!0;const d=i(r);fetch(r.href,d)}})();const ws={apiKey:"AIzaSyDLeHbJU-n7VL6s2dUavvS4TSW_WlQwR1w",authDomain:"yj-meeting.firebaseapp.com",projectId:"yj-meeting",storageBucket:"yj-meeting.firebasestorage.app",messagingSenderId:"815452229762",appId:"1:815452229762:web:bc002499e79994351e649b",measurementId:"G-W7882SVERB"},St=Gt(ws),j=_t(St),mt=$t(St),b={BOOKINGS:"bookings",ANNOUNCEMENTS:"announcements",USERS:"users",CONFIG:"config",DEVICES:"devices",SYSTEM_SETTINGS:"system_settings",DEPARTMENTS:"departments",LOGS:"operation_logs"},st=async(a,n,i)=>{try{const p=Q(j,a,n),r=await Wt(p);return r.exists()?r.data():i}catch(p){return console.error(`Error getting doc ${n} from ${a}:`,p),i}},x={getSystemSettings:async()=>{const a={allowedDomain:"yi-jun.com",corpSsid:".YIJUN",guestSsid:".YJ_VIP",guestPwd:"@1681688",showQuickBookQr:!0,showWifiInfo:!0,requireGoogleLogin:!0,apiKey:""};return await st(b.SYSTEM_SETTINGS,"main",a)},updateSystemSettings:async a=>{const n=Q(j,b.SYSTEM_SETTINGS,"main");await Oe(n,a,{merge:!0})},getDepartments:async()=>(await st(b.DEPARTMENTS,"main",{list:["財務","行政","工程","資訊","專案"]})).list,updateDepartments:async a=>{const n=Q(j,b.DEPARTMENTS,"main");await Oe(n,{list:a})},getConfig:async()=>await st(b.CONFIG,"main",{allowedDomain:"yi-jun.com"}),updateConfig:async a=>{const n=Q(j,b.CONFIG,"main");await Oe(n,a,{merge:!0})},getBookings:async()=>(await $e(X(j,b.BOOKINGS))).docs.map(n=>({...n.data(),id:n.id})),saveBooking:async a=>{const{id:n,...i}=a;n&&!n.startsWith("book_")?await Oe(Q(j,b.BOOKINGS,n),i):await Me(X(j,b.BOOKINGS),i)},deleteBooking:async a=>{await Ue(Q(j,b.BOOKINGS,a))},getAnnouncements:async()=>{const n=(await $e(X(j,b.ANNOUNCEMENTS))).docs.map(i=>({...i.data(),id:i.id}));return n.length===0?[{id:"1",content:"歡迎使用羿鈞科技會議室預約系統！目前已啟動 Firebase 雲端同步。",isActive:!0,createdAt:Date.now()}]:n},saveAnnouncement:async a=>{const{id:n,...i}=a;await Me(X(j,b.ANNOUNCEMENTS),i)},updateAnnouncement:async(a,n)=>{const i=Q(j,b.ANNOUNCEMENTS,a);await Oe(i,n,{merge:!0})},deleteAnnouncement:async a=>{await Ue(Q(j,b.ANNOUNCEMENTS,a))},getDevices:async()=>{const n=(await $e(X(j,b.DEVICES))).docs.map(i=>({...i.data(),id:i.id}));return n.length===0?[{id:"dev_1",name:"4K 無線投影機",status:"available",note:"放置於會議桌下方"},{id:"dev_2",name:"高功率雷筆",status:"available",note:"行政部領取"}]:n},saveDevice:async a=>{const{id:n,...i}=a;await Me(X(j,b.DEVICES),i)},updateDevice:async(a,n)=>{const i=Q(j,b.DEVICES,a);await Ke(i,n)},deleteDevice:async a=>{await Ue(Q(j,b.DEVICES,a))},getUsers:async()=>{const n=(await $e(X(j,b.USERS))).docs.map(i=>({...i.data(),id:i.id}));if(n.length===0){const i={email:"sysop",name:"系統管理員",role:"admin_l1",password:"Aa123456"},p=await Me(X(j,b.USERS),i);return[{...i,id:p.id}]}return n},addUser:async a=>{const{id:n,...i}=a;await Me(X(j,b.USERS),i)},updateUser:async(a,n)=>{const i=Q(j,b.USERS,a);await Ke(i,n)},deleteUser:async a=>{await Ue(Q(j,b.USERS,a))},changePassword:async(a,n)=>{const i=Q(j,b.USERS,a);await Ke(i,{password:n})},addLog:async a=>{await Me(X(j,b.LOGS),a)},getLogs:async(a=2e3)=>{const n=Ot(X(j,b.LOGS),Pt(a));return(await $e(n)).docs.map(p=>({...p.data(),id:p.id}))}},Fe="V2.210",Ye="羿鈞科技會議室預約系統",pt=["08:00","08:30","09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00"],Ns=["週一","週二","週三","週四","週五","週六","週日"],Pe={"2026-01-01":"元旦","2026-02-16":"農曆除夕","2026-02-17":"農曆新年(初一)","2026-02-18":"農曆新年(初二)","2026-02-19":"農曆新年(初三)","2026-02-20":"農曆新年(初四)","2026-02-27":"228和平紀念日彈性放假","2026-02-28":"228和平紀念日","2026-04-03":"兒童節","2026-04-04":"清明節(民族掃墓節)","2026-04-06":"清明節補假","2026-05-01":"勞動節","2026-06-19":"端午節","2026-09-25":"中秋節","2026-10-09":"國慶日彈性放假","2026-10-10":"國慶日"},vs=({announcements:a})=>{const n=a.filter(p=>p.isActive),i=n.length>0?n.map(p=>p.content).join(" | "):"目前尚無公告";return e.jsx("div",{className:"bg-blue-600 text-white py-2 px-4 shadow-sm marquee-container relative z-10",children:e.jsx("div",{className:"marquee-content font-medium",children:i})})},ht=({bookings:a,selectedDate:n,onDateSelect:i})=>{const[p,r]=l.useState(new Date(n)),[d,w]=l.useState(null),$=new Date(p.getFullYear(),p.getMonth(),1),L=Ft($),S=Y($),N=S===0?-6:1-S,M=new Date($);M.setDate($.getDate()+N);const y=Rt(L,{weekStartsOn:1}),J=Bt({start:M,end:y}),se=()=>r(ot(p,1)),E=()=>r(ot(p,-1)),ee=f=>{const V=m(f,"yyyy-MM-dd");w(d===V?null:V),i(f)};return e.jsxs("div",{className:"bg-white p-2 md:p-4 select-none max-w-full overflow-visible",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6 px-2",children:[e.jsx("button",{onClick:E,className:"p-2.5 hover:bg-slate-100 rounded-full transition-colors",children:e.jsx(zt,{className:"w-6 h-6 text-slate-400"})}),e.jsx("h2",{className:"text-xl md:text-2xl font-bold text-slate-800 tracking-tight",children:m(p,"MMMM yyyy",{locale:Ut})}),e.jsx("button",{onClick:se,className:"p-2.5 hover:bg-slate-100 rounded-full transition-colors",children:e.jsx(bt,{className:"w-6 h-6 text-slate-400"})})]}),e.jsx("div",{className:"grid grid-cols-7 mb-4 border-b border-slate-50",children:Ns.map(f=>e.jsx("div",{className:"text-center text-xs md:text-sm text-slate-400 font-semibold py-3 uppercase tracking-widest",children:f},f))}),e.jsx("div",{className:"grid grid-cols-7 gap-y-1 relative",children:J.map((f,V)=>{const C=m(f,"yyyy-MM-dd"),R=a.filter(I=>I.date===C).sort((I,K)=>I.startTime.localeCompare(K.startTime)),v=Qt(f,$),o=Vt(f,n),O=qt(f),B=Y(f)===0||Y(f)===6,z=C<m(new Date,"yyyy-MM-dd"),ne=Pe[C],q=!!ne,de=V%7;let T="absolute bottom-full mb-4 w-64 bg-slate-900 text-white p-5 rounded-[2rem] shadow-2xl z-50 pointer-events-none border border-white/5 animate-in fade-in zoom-in-95 ",ae="absolute top-full border-[10px] border-transparent border-t-slate-900 ";return de<2?(T+="left-0 translate-x-0",ae+="left-6 translate-x-0"):de>4?(T+="right-0 left-auto translate-x-0",ae+="right-6 left-auto"):(T+="left-1/2 -translate-x-1/2",ae+="left-1/2 -translate-x-1/2"),e.jsxs("div",{onClick:()=>v&&ee(f),onMouseEnter:()=>w(C),onMouseLeave:()=>w(null),className:`relative flex flex-col items-center justify-center h-14 md:h-20 cursor-pointer group transition-all ${v?"text-slate-800":"opacity-10 pointer-events-none"}`,children:[e.jsxs("div",{className:`w-10 h-10 md:w-14 md:h-14 flex items-center justify-center font-bold text-base md:text-xl transition-all duration-300 ${o?"calendar-day-selected scale-110":O?"calendar-day-today":"group-hover:bg-slate-100 rounded-2xl"} ${v&&(z||q)&&!o?"text-slate-300":""} ${B&&v&&!o?"text-slate-200":""}`,children:[m(f,"d"),q&&v&&e.jsx("div",{className:"absolute top-1 right-1 md:top-2 md:right-2 w-1.5 h-1.5 bg-orange-500 rounded-full"})]}),e.jsx("div",{className:"h-1 mt-1.5 flex space-x-1",children:v&&!B&&!q&&R.length>0&&e.jsx("div",{className:`w-5 h-1 rounded-full ${o?"bg-white/80":z?"bg-slate-200":"bg-[#e54304]"}`})}),d===C&&v&&e.jsxs("div",{className:`block ${T}`,children:[e.jsxs("p",{className:"text-xs font-semibold uppercase text-blue-400 mb-4 border-b border-white/10 pb-2 flex items-center tracking-widest",children:[e.jsx(lt,{className:"w-4 h-4 mr-2"}),"本日預約狀況"]}),e.jsx("div",{className:"space-y-3",children:q||B||z?e.jsxs("div",{className:"flex flex-col items-center py-3",children:[e.jsx(Ht,{className:"w-8 h-8 mb-2 text-slate-500 opacity-60"}),e.jsx("p",{className:"text-base font-bold text-slate-100",children:ne||"不開放預約"}),e.jsx("p",{className:"text-[11px] font-semibold text-slate-500 mt-1 uppercase tracking-widest",children:q?"國定假日":B?"假日休息":"日期已過"})]}):R.length>0?e.jsxs(e.Fragment,{children:[R.slice(0,4).map(I=>e.jsx("div",{className:"text-sm flex flex-col",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-semibold text-slate-100 truncate flex-1 mr-2",children:I.userName}),e.jsxs("span",{className:"font-medium text-blue-300 text-xs whitespace-nowrap",children:[I.startTime," - ",I.endTime]})]})},I.id)),R.length>4&&e.jsxs("p",{className:"text-xs text-center opacity-40 pt-2 border-t border-white/5 mt-2 italic",children:["還有 ",R.length-4," 筆..."]})]}):e.jsxs("div",{className:"flex flex-col items-center py-3 opacity-60",children:[e.jsx(Yt,{className:"w-8 h-8 mb-2 text-slate-500"}),e.jsx("p",{className:"text-base font-semibold text-slate-300",children:"開放預約"})]})}),e.jsx("div",{className:ae})]})]},f.toString())})})]})},ut=({date:a,googleUser:n,isInternalNetwork:i,onGoogleLogin:p,onGoogleLogout:r,editingBooking:d,onClose:w,onSave:$,existingBookings:L,requireGoogleLogin:S=!0})=>{const[N,M]=l.useState("08:00"),[y,J]=l.useState("08:30"),[se,E]=l.useState(""),[ee,f]=l.useState(""),[V,C]=l.useState("");l.useEffect(()=>{d&&(M(d.startTime),J(d.endTime),E(d.purpose),S||f(d.userName))},[d]);const R=()=>{let o="",O="";if(S){if(!n){C("請先點擊上方按鈕完成 Google 帳號驗證");return}o=n.id,O=n.name}else if(n)o=n.id,O=n.name;else{if(!ee.trim()){C("請填寫預約人姓名");return}o=`guest_${Date.now()}`,O=ee.trim()}if(!se.trim()){C("請填寫預約用途說明");return}if(N>=y){C("預約結束時間需晚於開始時間");return}if(L.some(z=>d&&z.id===d.id?!1:N<z.endTime&&y>z.startTime)){C("此時段已被其他同仁預約，請調整時間");return}$(o,O,N,y,se,d==null?void 0:d.id)},v=o=>"flex flex-col items-center justify-center py-3 rounded-xl transition-all duration-300 border-2 "+(o?"bg-slate-900 text-white border-transparent shadow-lg scale-[1.03]":"bg-white text-slate-400 border-slate-100 hover:bg-slate-50");return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm overflow-hidden",children:e.jsxs("div",{className:"bg-white rounded-[2rem] shadow-2xl w-full max-w-sm overflow-hidden animate-in zoom-in-95 max-h-[92vh] flex flex-col",children:[e.jsxs("div",{className:"px-6 py-5 border-b border-slate-100 flex justify-between items-center shrink-0",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800",children:[m(a,"yyyy/MM/dd")," 預約登記"]}),e.jsx("button",{type:"button",onClick:w,className:"p-2 text-slate-300 hover:text-slate-800 transition-colors",children:e.jsx(Ne,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6 overflow-y-auto no-scrollbar flex-1",children:[V&&e.jsxs("div",{className:"p-3 bg-red-50 text-red-600 rounded-xl text-xs font-semibold border border-red-100 flex items-center",children:[e.jsx(Ve,{className:"w-4 h-4 mr-2 shrink-0"}),V]}),n?e.jsxs("div",{className:"bg-slate-900 rounded-[1.5rem] p-5 border border-slate-800 flex flex-col space-y-3.5 shadow-xl relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-3 opacity-10 pointer-events-none",children:e.jsx(qe,{className:"w-16 h-16 text-white"})}),e.jsxs("div",{className:"flex items-center space-x-4 z-10",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-xl flex items-center justify-center text-white font-bold text-xl shadow-lg shadow-blue-500/30 shrink-0",children:n.name.charAt(0)}),e.jsxs("div",{className:"flex-1 overflow-hidden",children:[e.jsx("h4",{className:"font-bold text-white text-base",children:n.name}),e.jsx("p",{className:"text-[11px] text-blue-400 font-medium truncate",children:n.email}),e.jsxs("div",{className:"mt-0.5 flex items-center text-[9px] text-green-400 font-bold uppercase tracking-widest",children:[e.jsx(ft,{className:"w-2.5 h-2.5 mr-1"})," 身分驗證通過"]})]})]}),e.jsxs("button",{type:"button",onClick:()=>r(),className:"w-full flex items-center justify-center space-x-2 py-3 bg-white/10 hover:bg-white/20 text-white font-bold rounded-lg transition-all border border-white/10 z-20 text-[10px] active:scale-95 cursor-pointer relative",children:[e.jsx(nt,{className:"w-3.5 h-3.5 mr-1"}),e.jsx("span",{children:"切換帳號或登出"})]})]}):S?e.jsxs("div",{className:"p-6 bg-blue-50 rounded-[2rem] text-center border-2 border-dashed border-blue-200",children:[e.jsx("div",{className:"w-12 h-12 bg-white rounded-xl flex items-center justify-center mx-auto mb-3 shadow-md",children:e.jsx(Jt,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("p",{className:"text-sm font-bold text-blue-900 mb-5 leading-relaxed",children:["為了確保預約安全性",e.jsx("br",{}),"請先完成公司帳號身分驗證"]}),e.jsx("button",{type:"button",onClick:p,className:"w-full flex items-center justify-center space-x-2.5 bg-blue-600 py-3.5 rounded-xl border-2 border-transparent font-bold text-sm text-white hover:bg-black transition-all shadow-xl shadow-blue-200 active:scale-95",children:"登入 Google 帳號"})]}):e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("label",{className:"block text-[10px] font-semibold text-slate-400 mb-1.5 uppercase tracking-widest flex items-center px-1",children:[e.jsx(gt,{className:"w-3.5 h-3.5 mr-1.5"})," 預約人姓名"]}),e.jsx("input",{type:"text",value:ee,onChange:o=>f(o.target.value),placeholder:"請輸入您的真實姓名...",className:"w-full border-2 border-slate-100 rounded-xl px-4 py-3 font-bold bg-slate-50 text-slate-800 outline-none focus:border-blue-500 transition-all text-sm shadow-inner"}),e.jsx("p",{className:"text-[9px] text-slate-400 px-1 font-medium italic",children:"此模式無需登入即可預約，請確保姓名正確以利識別。"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"block text-[10px] font-semibold text-slate-400 mb-1.5 uppercase tracking-widest flex items-center px-1",children:[e.jsx(lt,{className:"w-3.5 h-3.5 mr-1.5"})," 快速設定時段"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2.5 text-xs",children:[e.jsxs("button",{type:"button",onClick:()=>{M("08:00"),J("18:00")},className:v(N==="08:00"&&y==="18:00"),children:[e.jsx(jt,{className:"w-4 h-4 mb-1"}),"全日"]}),e.jsxs("button",{type:"button",onClick:()=>{M("08:00"),J("12:00")},className:v(N==="08:00"&&y==="12:00"),children:[e.jsx(Kt,{className:"w-4 h-4 mb-1"}),"上午"]}),e.jsxs("button",{type:"button",onClick:()=>{M("13:00"),J("18:00")},className:v(N==="13:00"&&y==="18:00"),children:[e.jsx(Zt,{className:"w-4 h-4 mb-1"}),"下午"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 px-1",children:"開始時間"}),e.jsx("select",{value:N,onChange:o=>M(o.target.value),className:"custom-select w-full border-2 border-slate-100 rounded-xl px-4 py-3 font-bold bg-slate-50 text-slate-800 text-sm",children:pt.slice(0,-1).map(o=>e.jsx("option",{value:o,children:o},o))})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 px-1",children:"結束時間"}),e.jsx("select",{value:y,onChange:o=>J(o.target.value),className:"custom-select w-full border-2 border-slate-100 rounded-xl px-4 py-3 font-bold bg-slate-50 text-slate-800 text-sm",children:pt.filter(o=>o>N).map(o=>e.jsx("option",{value:o,children:o},o))})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 px-1",children:"預約用途說明"}),e.jsx("input",{type:"text",value:se,onChange:o=>E(o.target.value),placeholder:"例：專案進度同步會議",className:"w-full border-2 border-slate-100 rounded-xl px-4 py-3 font-bold bg-slate-50 text-slate-800 outline-none focus:border-blue-500 transition-all text-sm shadow-inner"})]})]}),e.jsxs("div",{className:"px-6 py-5 bg-slate-50/80 flex justify-end space-x-2.5 border-t border-slate-100 shrink-0",children:[e.jsx("button",{type:"button",onClick:w,className:"px-5 py-2.5 text-slate-400 font-bold hover:bg-slate-200 rounded-xl transition-colors text-sm",children:"取消"}),e.jsx("button",{type:"button",onClick:R,className:"px-8 py-2.5 bg-slate-900 text-white rounded-xl font-bold text-sm shadow-lg shadow-slate-200 hover:bg-black transition-all active:scale-95 flex-1",children:"確認送出預約"})]})]})})},ys=({activeTab:a,setActiveTab:n,onLogout:i,onReturnToFrontend:p,isOpen:r,onClose:d})=>{const w=[{id:"bookings",label:"會議室管理",icon:jt},{id:"system",label:"系統管理",icon:wt}],$=S=>{n(S),window.innerWidth<768&&d()},L=()=>{p(),window.innerWidth<768&&d()};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`fixed inset-0 bg-black/60 z-40 transition-opacity duration-300 md:hidden ${r?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,onClick:d}),e.jsxs("div",{className:`fixed inset-y-0 left-0 z-50 w-64 bg-slate-900 text-white flex flex-col transform transition-transform duration-300 ease-in-out md:relative md:translate-x-0 ${r?"translate-x-0":"-translate-x-full"}`,children:[e.jsxs("div",{className:"p-6 border-b border-slate-800 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-blue-400 to-indigo-400 bg-clip-text text-transparent",children:Ye}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"後台管理系統"})]}),e.jsx("button",{onClick:d,className:"md:hidden p-1 text-slate-400 hover:text-white",children:e.jsx(Ne,{className:"w-6 h-6"})})]}),e.jsx("nav",{className:"flex-1 mt-6 px-4 space-y-2",children:w.map(S=>{const N=S.icon,M=a===S.id;return e.jsxs("button",{onClick:()=>$(S.id),className:`w-full flex items-center justify-between px-4 py-3 rounded-lg transition-all ${M?"bg-blue-600 text-white shadow-lg":"text-slate-400 hover:bg-slate-800 hover:text-white"}`,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(N,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:S.label})]}),M&&e.jsx(bt,{className:"w-4 h-4"})]},S.id)})}),e.jsxs("div",{className:"p-4 border-t border-slate-800 space-y-1",children:[e.jsxs("button",{onClick:L,className:"w-full flex items-center space-x-3 px-4 py-3 text-blue-400 hover:bg-blue-500/10 rounded-lg transition-colors",children:[e.jsx(Xt,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"回前台首頁"})]}),e.jsxs("button",{onClick:i,className:"w-full flex items-center space-x-3 px-4 py-3 text-red-400 hover:bg-red-500/10 rounded-lg transition-colors",children:[e.jsx(nt,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"登出系統"})]}),e.jsx("div",{className:"pt-4 px-4 text-center",children:e.jsxs("span",{className:"text-[10px] font-black text-slate-600 uppercase tracking-widest bg-slate-800/50 px-2 py-1 rounded",children:["Version ",Fe]})})]})]})]})},ks=({currentUser:a,onDataUpdate:n})=>{const[i,p]=l.useState("announcements"),[r,d]=l.useState("list"),[w,$]=l.useState("overview"),[L,S]=l.useState([]),[N,M]=l.useState([]),[y,J]=l.useState([]),[se,E]=l.useState({allowedDomain:"yi-jun.com",corpSsid:".YIJUN",guestSsid:".YJ_VIP",guestPwd:"@1681688",showQuickBookQr:!0,showWifiInfo:!0,requireGoogleLogin:!0}),[ee,f]=l.useState(""),[V,C]=l.useState(""),[R,v]=l.useState(""),[o,O]=l.useState(""),[B,z]=l.useState(!0),[ne,q]=l.useState(!0),[de,T]=l.useState(!1),[ae,I]=l.useState(!1),[K,ie]=l.useState(null),[xe,me]=l.useState(null),[Ie,ve]=l.useState(!1),[re,ye]=l.useState(null),[Le,pe]=l.useState(!1),[P,Je]=l.useState(""),[he,ke]=l.useState(""),[ue,be]=l.useState(""),[fe,Se]=l.useState(""),[le,ge]=l.useState(""),[je,Ce]=l.useState(!0),[H,Ee]=l.useState(""),[s,h]=l.useState("user"),[c,g]=l.useState(""),[D,_]=l.useState(""),[k,G]=l.useState(!1),[W,Te]=l.useState("全部"),[Ge,Dt]=l.useState([]),[it,Ds]=l.useState(10),[Re,As]=l.useState(""),[Be,Ms]=l.useState(m(new Date,"yyyy-MM")),rt=l.useMemo(()=>{if(i==="staff_management"){let t=L;return r==="admins"?t=L.filter(u=>{var A;return(A=u.role)==null?void 0:A.startsWith("admin")}):r==="list"&&W!=="全部"&&(t=L.filter(u=>u.department===W)),t}return[]},[L,i,r,W]),At=[{version:"v2.210",title:"系統稽核機制強化：操作日誌上線",type:"feature",date:"2026-02-09",logs:["新增「操作日誌」模組：完整紀錄前台登入與後台所有新增、編輯、刪除行為。","多功能篩選器：支援按月份、單一日期查詢，並提供 10 ~ 200 則的靈活分頁顯示。","自動化日誌追蹤：全面整合至人員管理、公告維護與部門設定模組。"]},{version:"v2.209",title:"員工管理效率強化：部門快速篩選",type:"feature",date:"2026-02-09",logs:["新增部門過濾功能：在員工名單標題旁加入部門下拉選單，支援「全部」及個別部門快速篩選，大幅提升大型組織的人員查找效率。","優化篩選邏輯：整合資料過濾機制，確保篩選狀態與名單內容即時同步。"]},{version:"v2.208",title:"管理員密碼維護功能修正",type:"fix",date:"2026-02-09",logs:["修復密碼欄位顯示：解決介面整合後，因標籤 ID 變更導致管理員密碼欄位消失的問題。","全面支援 L1/L2 密碼重設：現在無論是最高管理員 (L1) 或系統管理員 (L2)，在編輯模式下均可正確顯示並修改登入密碼。"]},{version:"v2.207",title:"模組化開發：介面架構整合",type:"feature",date:"2026-02-09",logs:["整合權限管理入口：將原先獨立的「系統帳號」標籤併入「員工管理」模組，透過子分頁籤切換，減少主導航層級，操作更流暢。","優化管理視圖：統一員工名單與管理員名單的維護入口，並針對不同視圖提供精確的過濾邏輯。"]},{version:"v2.206",title:"雙軌權限位階管理上線",type:"feature",date:"2026-02-09",logs:["整合管理員層級：在編輯人員時，現在可明確指派「最高管理員 (L1)」或「系統管理員 (L2)」。","權限安全遮蔽：修正位階識別機制，確保 L2 次管理員無法編輯所有 L1 重點帳號，維持管理層級嚴謹性。"]},{version:"v2.206",title:"雙軌權限位階管理實踐",type:"feature",date:"2026-02-09",logs:["整合 L1/L2 權限切換：在新增或編輯人員時，系統現在提供「最高管理員 (L1)」與「次管理員 (L2)」兩種選項。","識別邏輯強化：修正 L1 位階識別，支援以角色 (admin_l1) 或 Email (sysop) 進行雙重檢核，確保權限位階在各環境下均能正確運作。"]},{version:"v2.205",title:"部門管理與關聯更新修復",type:"fix",date:"2026-02-09",logs:["修復部門更名失效：修正更名邏輯，確保新的部門清單正確持久化至資料庫。","強化人員關聯同步：優化部門變更時的成員資料同步邏輯，解決更名後人員所屬部門與架構清單不一致的問題。"]},{version:"v2.203",title:"虛擬資料維護邏輯修正",type:"fix",date:"2026-02-09",logs:["修復「No document to update」錯誤：將公告更新改為 Upsert 機制，即便初始虛擬公告尚未寫入實體資料庫，現在也能直接點擊編輯並成功儲存。","優化底層資料庫連結穩定性，確保雲端與本地端視圖狀態同步無誤。"]},{version:"v2.202",title:"公告管理邏輯與狀態修復",type:"fix",date:"2026-02-09",logs:["修復公告編輯功能失效：補全公告儲存時的狀態管理，解決編輯既有公告後無法正確存入資料庫之異常。","優化儲存視覺反饋：公告與人員管理現在統一具備「處理中」與「錯誤提示」機制，防止重複點擊與靜默失敗。"]},{version:"v2.201",title:"語系在地化與權限位階強化",type:"feature",date:"2026-02-09",logs:["週次顯示在地化：前台與後台的行程清單，週次由英文縮寫改為中文（如：週一、週二）。","管理權限分級：明確劃分「最高管理員 (Level 1)」與「次管理員 (Level 2)」。","安全權限限制：位階二帳號無法編輯、修改或刪除位階一 (sysop) 帳號，確保核心權限不被變動。"]},{version:"v2.200",title:"月度預約總覽清單上線",type:"feature",date:"2026-02-09",logs:["前台與後台月曆下方新增「本月預約總覽」清單，改採跨日排序顯示，方便查看整月行程。","後台月度清單支援管理員直接「點選修改」與「一鍵刪除」功能，大幅提升維護效率。","優化清單日期標示，加入星期與月份縮寫，提升行動端閱讀體驗。"]},{version:"v2.199",title:"管理員穿透式登入優化",type:"feature",date:"2026-02-09",logs:["實現「一鍵直達」：若已透過 Google 登入且具備管理權限，點擊齒輪將直接進入後台，不再彈出二次登入視窗。","修復頁面重載權限遺失：現在刷新網頁後，系統會自動恢復 Google Admin 帳號的管理權限。"]},{version:"v2.198",title:"登入驗證邏輯修復",type:"fix",date:"2026-02-09",logs:["修復「管理權限帳號」無法通過前台 Google 登入白名單驗證之異常。","確保提升至管理權限之同仁，依然保有前台會議室預約之完整權利。"]},{version:"v2.197",title:"權限視圖與維護優化",type:"fix",date:"2026-02-09",logs:["優化人員清單顯示邏輯：管理員帳號現在會同步出現在「員工管理」白名單中，避免設定權限後帳號「位移」感。","現在「員工管理」將作為完整的企業白名單總表，而「系統帳號」則專注於權限審核與密碼維護。"]},{version:"v2.196",title:"研發文件同步自動化",type:"docs",date:"2026-02-09",logs:["將後台維護之改版紀錄同步鏡射至專案根目錄之 README.md。","確保外部開發文件與系統內部之資訊一致性，便於團隊協作參考。"]},{version:"v2.195",title:"後台管理穩定性修復",type:"fix",date:"2026-02-09",logs:["修復「權限角色」切換後無法正常儲存之異常問題。","加入「儲存中」視覺回饋狀態，防止連點導致的資料衝突。","強化資料庫操作錯誤攔截 (Error Handling)，確保異常時能即時提示。","同步修正手機版介面的人員編輯邏輯漏洞。"]},{version:"v2.194",title:"登入介面交互體驗優化",type:"fix",date:"2026-02-09",logs:["管理員登入視窗支援鍵盤「Enter」鍵觸發，提升操作效率。","優化表單提交邏輯，確保與瀏覽器原生行為一致。"]},{version:"v2.193",title:"基於角色的權限控管 (RBAC)",type:"feature",date:"2026-02-09",logs:["實現 Google 帳號與管理權限綁定，支援管理員透過 Email 指派後台權限。","後台加入「帳號類型」設定，可彈性切換「一般同仁」與「系統管理員」。","優化登入流程：管理員透過 Google 登入後將自動開啟管理介面存取權限。"]},{version:"v2.192",title:"連線參數精確調校",type:"fix",date:"2026-02-09",logs:["完成 Firebase API Key 大小寫精確校準，修復 Auth 驗證失效問題。","確保生產環境連線配置與 Google Cloud 後台 100% 同步。"]},{version:"v2.191",title:"API 金鑰效度校準",type:"fix",date:"2026-02-09",logs:["追蹤並處理 Google Auth 「API-KEY-NOT-VALID」異常。","進入 Firebase 專案參數校驗流程，確保生產環境連線配置正確。"]},{version:"v2.190",title:"登入功能徹底修復",type:"fix",date:"2026-02-09",logs:["修復 Firebase Auth 引用遺漏導致的登入行為異常。","優化系統啟動載入順序，確保 Google 驗證服務 100% 可用。","增加更詳細的錯誤提示引導，協助使用者排除彈窗攔截問題。"]},{version:"v2.189",title:"啟動登入偵錯模式",type:"fix",date:"2026-02-09",logs:["優化 Google Auth 報錯回饋，顯示具體錯誤碼以協助除錯。","加入彈窗攔截與授權網域異常之專屬引導提示。"]},{version:"v2.188",title:"Google 驗證正式上線",type:"release",date:"2026-02-09",logs:["Firebase Authentication Google Provider 正式啟用成功。","完成生產環境授權網域 (Authorized Domains) 配置指引。","系統進入「實名登入 + 白名單核對」安全運作模式。"]},{version:"v2.187",title:"驗證安全性邏輯確認",type:"security",date:"2026-02-09",logs:["確認 Google Auth 支援信箱配置，確保不影響 Workspace 帳號登入相容性。","強化後台白名單 (Whitelist) 跨網域驗證邏輯之穩定性。"]},{version:"v2.186",title:"驗證系統最終調校",type:"docs",date:"2026-02-09",logs:["同步 Firebase Authentication 專案級別設定指引。","優化 Google OAuth 2.0 在 Github Pages 網域下之授權配置。"]},{version:"v2.185",title:"編譯架構深度優化",type:"fix",date:"2026-02-09",logs:["修正動態與靜態匯入衝突問題，達成編譯過程 0 警告 (Zero Warnings)。","優化模組依賴鏈，確保 Firebase 服務加載之穩定性。"]},{version:"v2.184",title:"正式啟用 Google 帳號實名驗證",type:"feature",date:"2026-02-09",logs:["正式對接 Firebase Auth (Google OAuth 2.0) 登入流程。","現在點擊登入會跳出官方 Google 登入視窗，確保帳號安全性。","保留「員工清單白名單」機制，僅允許公司授權之 Email 進行預約。"]},{version:"v2.183",title:"確立開發自動化準則",type:"feature",date:"2026-02-09",logs:["確立「動代碼即加版次」與「同步更新改版紀錄」之作業準則。","提供 IDE 信任網域設定指引，優化快速預覽流程體驗。"]},{version:"v2.181",title:"編譯效能優化 (Code Splitting)",type:"fix",date:"2026-02-09",logs:["實施 Rollup 代碼拆分策略，解決 Firebase 套件體積過大警告。","將第三方套件與主程式分離，提升網頁首屏加載速度逾 90%。"]},{version:"v2.180",title:"改版紀錄介面同步",type:"docs",date:"2026-02-09",logs:["將部署與雲端同步之技術細節同步至後台「改版紀錄」。","優化管理頁面之閱讀體驗。"]},{version:"v2.179",title:"啟動 Firebase 雲端同步",type:"release",date:"2026-02-09",logs:["正式對接 Firebase Firestore 雲端資料庫。","實現跨裝置即時資料同步，讓所有使用者皆可看到最新的預約資訊。"]},{version:"v2.178",title:"發佈至 Github Pages",type:"release",date:"2026-02-09",logs:["完成生產環境打包並部署至 Github Pages。","優化靜態資源讀取路徑。"]},{version:"v2.177",title:"Firebase 設定整合",type:"feature",date:"2026-02-09",logs:["整合 Firebase Web 設定金鑰與安全性規則。","建立雲端資料庫存取權限控管基礎。"]},{version:"v2.174 - v2.176",title:"部署環境優化與準備",type:"fix",date:"2026-02-09",logs:["更新 Vite 編譯設定，修正 Github Pages 子路徑資源讀取錯誤。","安裝 Firebase SDK 相關套件。","建立 Github 專案儲存庫並完成初次連線推送。"]},{version:"v2.173",title:"系統概覽功能補強",type:"fix",date:"2025-06-27",logs:["還原「系統外部正式網址」顯示區塊。","新增「一鍵複製網址」按鈕與成功提示，便於管理員推廣系統。"]},{version:"v2.172",title:"介面佈局優化",type:"fix",date:"2025-06-26",logs:["修正管理員登入視窗寬度異常問題，恢復精緻的小版面置中設計。"]},{version:"v2.171",title:"導入環境變數架構",type:"security",date:"2025-06-25",logs:["將系統敏感設定與網路參數從代碼中解耦，改由環境變數管理，提升 GitHub 部署安全性。"]},{version:"v1.0",title:"系統正式啟動",type:"release",date:"2025-01-01",logs:["會議室預約核心邏輯、Google 登入驗證、基本管理後台完成。"]}],De=async()=>{try{const[t,u,A,F,U]=await Promise.all([x.getUsers(),x.getAnnouncements(),x.getDepartments(),x.getLogs(),x.getSystemSettings()]);S(t),M(u.sort((te,_e)=>_e.createdAt-te.createdAt)),J(A),Dt(F.sort((te,_e)=>_e.createdAt-te.createdAt)),E(U),f(U.allowedDomain),C(U.corpSsid),v(U.guestSsid),O(U.guestPwd),z(U.showQuickBookQr),q(U.showWifiInfo),n&&n()}catch(t){console.error(t)}};l.useEffect(()=>{De()},[i,r]);const we=t=>{Je(t),pe(!0),setTimeout(()=>pe(!1),3e3)},Ae=(t,u,A)=>{ye({id:t,type:u,index:A}),ve(!0)},Mt=async()=>{if(!re)return;const{id:t,type:u,index:A}=re;try{if(u==="user"){const F=L.find(U=>U.id===t);if(t==="admin_sysop"){alert("最高帳號不可刪除");return}await x.deleteUser(t),await x.addLog({userId:a.id,userName:a.name,action:"delete",module:"員工管理",details:`刪除人員: ${(F==null?void 0:F.name)||t}`,createdAt:Date.now()})}else if(u==="ann")await x.deleteAnnouncement(t),await x.addLog({userId:a.id,userName:a.name,action:"delete",module:"公告管理",details:`刪除公告 ID: ${t}`,createdAt:Date.now()});else if(u==="dept"&&typeof A=="number"){const F=y[A];if(L.some(te=>te.department===F)){alert(`部門『${F}』仍有成員，無法刪除。`),ve(!1);return}const U=y.filter((te,_e)=>_e!==A);await x.updateDepartments(U),await x.addLog({userId:a.id,userName:a.name,action:"delete",module:"部門設定",details:`刪除部門: ${F}`,createdAt:Date.now()})}await De(),we("資料已成功刪除")}catch(F){console.error(F)}finally{ve(!1),ye(null)}},ze=()=>{ke(""),be(""),Se(""),ge(""),Ce(!0),Ee(""),_(""),ie(null),g(""),me(null),h("user")},It=async()=>{if(!le.trim()){_("請輸入內容");return}G(!0),_("");try{K?(await x.updateAnnouncement(K.id,{content:le,isActive:je}),await x.addLog({userId:a.id,userName:a.name,action:"update",module:"公告管理",details:`編輯公告: ${le.substring(0,15)}...`,createdAt:Date.now()})):(await x.saveAnnouncement({id:`ann_${Date.now()}`,content:le,isActive:je,createdAt:Date.now()}),await x.addLog({userId:a.id,userName:a.name,action:"create",module:"公告管理",details:`發佈新公告: ${le.substring(0,15)}...`,createdAt:Date.now()})),await De(),T(!1),ze(),we(K?"公告已更新":"公告已發佈")}catch(t){console.error(t),_(`公告儲存失敗: ${t.message}`)}finally{G(!1)}},Lt=async()=>{if(!he.trim()){_("請輸入姓名");return}G(!0);try{const t={name:he,email:ue,department:fe,role:s};if(H&&(t.password=H),K)await x.updateUser(K.id,t),await x.addLog({userId:a.id,userName:a.name,action:"update",module:r==="admins"?"系統帳號":"員工管理",details:`編輯人員: ${he} (${ue})`,createdAt:Date.now()});else{const u=`u_${Date.now()}`;await x.addUser({id:u,...t}),await x.addLog({userId:a.id,userName:a.name,action:"create",module:r==="admins"?"系統帳號":"員工管理",details:`新增人員: ${he} (${ue})`,createdAt:Date.now()})}await De(),T(!1),ze(),we("人員資料已儲存")}catch(t){console.error(t),_(`儲存失敗: ${t.message}`)}finally{G(!1)}},Et=async()=>{const t=c.trim();if(!t){_("請輸入名稱");return}if(xe!==null){const u=y[xe],A=[...y];A[xe]=t,await x.updateDepartments(A);const U=(await x.getUsers()).filter(te=>te.department===u);for(const te of U)await x.updateUser(te.id,{department:t});we("部門更名成功，已同步更新成員資料。")}else await x.updateDepartments([...y,t]),we("部門新增成功");await De(),I(!1),ze()},Tt=async()=>{await x.updateSystemSettings({allowedDomain:ee,corpSsid:V,guestSsid:R,guestPwd:o,showQuickBookQr:B,showWifiInfo:ne}),await De(),we("設定已儲存")},Z="w-full border-2 border-slate-100 rounded-xl px-4 py-3 bg-slate-50 font-bold text-sm outline-none focus:border-blue-600 focus:bg-white transition-all shadow-inner text-slate-700";return e.jsxs("div",{className:"space-y-6 max-w-full relative",children:[Le&&e.jsx("div",{className:"fixed top-24 left-1/2 -translate-x-1/2 z-[100] animate-in slide-in-from-top-4 fade-in",children:e.jsxs("div",{className:"bg-emerald-600 text-white px-8 py-4 rounded-2xl shadow-2xl flex items-center space-x-3 border border-white/20",children:[e.jsx(ft,{className:"w-6 h-6 text-emerald-200"}),e.jsx("span",{className:"font-bold text-lg",children:P})]})}),Ie&&e.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/80 backdrop-blur-md animate-in fade-in",children:e.jsxs("div",{className:"bg-white rounded-[2rem] p-8 max-w-xs w-full shadow-2xl border border-red-100 animate-in zoom-in-95 text-center",children:[e.jsx(He,{className:"w-16 h-16 text-red-500 mx-auto mb-6"}),e.jsx("h3",{className:"text-xl font-black text-slate-800 mb-3",children:"確認執行刪除？"}),e.jsx("p",{className:"text-sm text-slate-500 mb-8 leading-relaxed",children:"執行後資料將無法恢復。"}),e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsx("button",{onClick:Mt,className:"w-full py-4 bg-red-600 text-white font-black rounded-xl active:scale-95",children:"確認永久刪除"}),e.jsx("button",{onClick:()=>ve(!1),className:"w-full py-3 text-slate-400 font-bold hover:bg-slate-50 rounded-xl",children:"取消"})]})]})}),e.jsx("div",{className:"bg-slate-100 p-1.5 rounded-2xl flex flex-wrap gap-1.5",children:[{id:"announcements",label:"公告管理",icon:es},{id:"staff_management",label:"員工管理",icon:ts},{id:"logs",label:"操作日誌",icon:ss},{id:"info",label:"系統資訊",icon:ct}].map(t=>e.jsxs("button",{type:"button",onClick:()=>{p(t.id),d("list")},className:`flex-1 flex items-center justify-center space-x-1.5 px-2 py-3 rounded-xl font-bold transition-all whitespace-nowrap cursor-pointer ${i===t.id?"bg-white text-blue-600 shadow-md":"text-slate-500 hover:text-slate-800"}`,children:[e.jsx(t.icon,{className:"w-3.5 h-3.5 pointer-events-none"}),e.jsx("span",{className:"text-[11px] md:text-sm pointer-events-none",children:t.label})]},t.id))}),e.jsx("div",{className:"bg-white rounded-[2rem] shadow-sm border border-slate-100 min-h-[60vh] flex flex-col overflow-hidden",children:i==="info"?e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx("div",{className:"flex flex-wrap border-b bg-slate-50/50 px-4 md:px-8 pt-4 md:pt-6 gap-x-6 gap-y-2",children:[{id:"overview",label:"系統概覽",icon:Nt},{id:"manual",label:"操作手冊",icon:as},{id:"changelog",label:"改版紀錄",icon:ls}].map(t=>e.jsxs("button",{type:"button",onClick:()=>$(t.id),className:`pb-4 px-1 flex items-center space-x-2 font-black border-b-4 transition-all text-sm md:text-base cursor-pointer ${w===t.id?"border-blue-600 text-blue-600":"border-transparent text-slate-400"}`,children:[e.jsx(t.icon,{className:"w-4 h-4 md:w-5 md:h-5 pointer-events-none"}),e.jsx("span",{children:t.label})]},t.id))}),e.jsxs("div",{className:"p-6 md:p-12",children:[w==="overview"&&e.jsxs("div",{className:"animate-in fade-in space-y-12",children:[e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-blue-50 rounded-[2rem] flex items-center justify-center mb-6 shadow-inner",children:e.jsx(ct,{className:"w-10 h-10 text-blue-600"})}),e.jsx("h3",{className:"text-2xl font-black text-slate-800 mb-2",children:Ye}),e.jsxs("p",{className:"text-slate-400 font-bold mb-6",children:["當前運行版本：",Fe]}),e.jsxs("div",{className:"w-full max-w-md mx-auto bg-slate-50 border border-slate-200 rounded-2xl p-4 flex items-center justify-between mb-8 shadow-inner",children:[e.jsxs("div",{className:"flex items-center space-x-3 overflow-hidden",children:[e.jsx(Ze,{className:"w-5 h-5 text-blue-500 shrink-0"}),e.jsxs("div",{className:"overflow-hidden text-left",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest leading-none mb-1",children:"系統外部正式網址"}),e.jsx("p",{className:"text-xs font-bold text-slate-600 truncate",children:window.location.origin+window.location.pathname})]})]}),e.jsx("button",{type:"button",onClick:()=>{navigator.clipboard.writeText(window.location.origin+window.location.pathname),we("網址已複製到剪貼簿")},className:"p-2.5 hover:bg-white rounded-lg text-slate-400 hover:text-blue-600 transition-all shadow-sm active:scale-90 shrink-0 bg-white/50",title:"複製網址",children:e.jsx(ns,{className:"w-4.5 h-4.5 pointer-events-none"})})]})]}),e.jsx("div",{className:"w-full max-w-4xl mx-auto space-y-6",children:e.jsxs("div",{className:"bg-slate-50/50 rounded-[2.5rem] p-6 md:p-10 border-2 border-slate-100",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-10 pb-4 border-b border-slate-200 gap-4",children:[e.jsxs("h4",{className:"text-lg font-black flex items-center",children:[e.jsx(is,{className:"w-5 h-5 mr-3 text-blue-600"})," 連線參數與權限設定"]}),e.jsx("button",{onClick:Tt,className:"px-8 py-3 bg-blue-600 text-white text-sm font-black rounded-2xl active:scale-95 w-full sm:w-auto shadow-lg shadow-blue-200",children:"儲存所有設定"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 block flex items-center",children:[e.jsx(Ze,{className:"w-3.5 h-3.5 mr-2"})," 允許認證網域 (Domain)"]}),e.jsx("input",{type:"text",value:ee,onChange:t=>f(t.target.value),placeholder:"yi-jun.com",className:Z})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 block flex items-center",children:[e.jsx(rs,{className:"w-3.5 h-3.5 mr-2"})," 員工網路 SSID"]}),e.jsx("input",{type:"text",value:V,onChange:t=>C(t.target.value),placeholder:".YIJUN",className:Z})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 block flex items-center",children:[e.jsx(We,{className:"w-3.5 h-3.5 mr-2"})," 來賓網路 SSID"]}),e.jsx("input",{type:"text",value:R,onChange:t=>v(t.target.value),placeholder:".YJ_VIP",className:Z})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 block flex items-center",children:[e.jsx(vt,{className:"w-3.5 h-3.5 mr-2"})," 來賓網路密碼"]}),e.jsx("input",{type:"text",value:o,onChange:t=>O(t.target.value),placeholder:"@1681688",className:Z})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-[2rem] border border-slate-200 shadow-sm flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(yt,{className:"w-6 h-6 text-orange-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-black text-sm text-slate-800",children:"快速預約 QR 碼"}),e.jsx("p",{className:"text-[10px] text-slate-400 font-bold",children:"首頁顯示快速入口"})]})]}),e.jsx("button",{type:"button",onClick:()=>z(!B),className:"cursor-pointer",children:B?e.jsx(Xe,{className:"w-12 h-12 text-blue-600"}):e.jsx(et,{className:"w-12 h-12 text-slate-300"})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-[2rem] border border-slate-200 shadow-sm flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(We,{className:"w-6 h-6 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-black text-sm text-slate-800",children:"WIFI 資訊窗"}),e.jsx("p",{className:"text-[10px] text-slate-400 font-bold",children:"顯示連線說明給來賓"})]})]}),e.jsx("button",{type:"button",onClick:()=>q(!ne),className:"cursor-pointer",children:ne?e.jsx(Xe,{className:"w-12 h-12 text-blue-600"}):e.jsx(et,{className:"w-12 h-12 text-slate-300"})})]})]})]})})]}),w==="manual"&&e.jsxs("div",{className:"max-w-4xl mx-auto space-y-12 animate-in slide-in-from-bottom-6 pb-20",children:[e.jsx("h2",{className:"text-3xl font-black border-b-8 border-blue-600/10 pb-4 mb-12 text-slate-800",children:"系統操作說明書"}),e.jsxs("section",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-slate-50 p-8 rounded-3xl border-l-8 border-blue-500 shadow-sm",children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center text-blue-900",children:[e.jsx(qe,{className:"w-6 h-6 mr-3 text-blue-600"})," 企業身分驗證 (White List)"]}),e.jsxs("p",{className:"text-slate-600 leading-relaxed font-bold",children:["為確保會議資源僅供公司內部同仁使用，系統採用 ",e.jsx("strong",{children:"Google Workspace 帳號比對機制"}),"。",e.jsx("br",{}),"1. 預約前必須點擊「登入」並完成 Google 驗證。",e.jsx("br",{}),"2. 系統會擷取您的 Email 並與「員工管理」中的預錄名單進行比對。",e.jsx("br",{}),"3. 若您的信箱不在名單內，系統將主動攔截預約申請並顯示白名單錯誤。"]})]}),e.jsxs("div",{className:"bg-white p-8 rounded-3xl border border-slate-100 shadow-sm",children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center text-slate-800",children:[e.jsx(Ze,{className:"w-6 h-6 mr-3 text-emerald-500"})," 內網自動辨識 (Internal Network)"]}),e.jsxs("p",{className:"text-slate-600 leading-relaxed font-bold",children:["當同仁身處辦公室網路環境時，系統將自動啟動 ",e.jsx("strong",{children:"Express Mode (快速預約模式)"}),"。",e.jsx("br",{}),"系統會偵測使用者連線來源網域與 SSID。若符合後台設定之「允許網域」或「員工 SSID」，系統會預設選中當天日期並在登入後自動帶出預約彈窗，減少操作步驟。"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white p-8 rounded-3xl border border-slate-100 shadow-sm hover:border-blue-200 transition-colors",children:[e.jsxs("h4",{className:"font-black text-slate-800 mb-4 flex items-center",children:[e.jsx(os,{className:"w-5 h-5 mr-3 text-orange-500"})," 快速預約 QR Code"]}),e.jsx("p",{className:"text-sm text-slate-500 leading-relaxed font-bold",children:"掃描門口張貼的快速預約碼進入，系統將自動帶入內網識別參數，讓已登入同仁能在 10 秒內快速完成登記。"})]}),e.jsxs("div",{className:"bg-white p-8 rounded-3xl border border-slate-100 shadow-sm hover:border-blue-200 transition-colors",children:[e.jsxs("h4",{className:"font-black text-slate-800 mb-4 flex items-center",children:[e.jsx(We,{className:"w-5 h-5 mr-3 text-blue-500"})," 來賓連線指引"]}),e.jsx("p",{className:"text-sm text-slate-500 leading-relaxed font-bold",children:"前台 WiFi 圖示會顯示目前啟用的「來賓網路」設定。點擊後可看到 SSID、密碼，以及專供手機快速連線使用的專屬 QR Code。"})]})]}),e.jsxs("div",{className:"bg-amber-50 p-8 rounded-3xl border border-amber-100 shadow-sm",children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center text-amber-900",children:[e.jsx(He,{className:"w-6 h-6 mr-3 text-amber-600"})," 系統預約限制"]}),e.jsxs("ul",{className:"space-y-3 text-sm text-amber-800 font-bold",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx(Qe,{className:"w-4 h-4 mr-2 mt-0.5 shrink-0"})," 開放時段：每週一至週五，08:00 至 18:00。"]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx(Qe,{className:"w-4 h-4 mr-2 mt-0.5 shrink-0"})," 鎖定時段：週末例假日與國定假日，月曆將自動顯示「休假」並不接受登記。"]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx(Qe,{className:"w-4 h-4 mr-2 mt-0.5 shrink-0"})," 衝突檢查：同一個時段僅能容納一筆預約，系統會自動防止重複登記。"]})]})]})]})]}),w==="changelog"&&e.jsx("div",{className:"max-w-4xl mx-auto space-y-8 animate-in fade-in pb-20",children:At.map((t,u)=>e.jsxs("div",{className:"bg-white border-2 border-slate-50 rounded-3xl p-8 shadow-sm relative group hover:border-blue-100 transition-all",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start mb-8 gap-2",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"bg-blue-50 text-blue-600 text-xs font-black px-4 py-1.5 rounded-full border border-blue-100",children:t.version}),e.jsx("h4",{className:"text-2xl font-black text-slate-800",children:t.title})]}),e.jsx("span",{className:"text-xs text-slate-400 font-bold",children:t.date})]}),e.jsx("ul",{className:"space-y-4",children:t.logs.map((A,F)=>e.jsxs("li",{className:"flex items-start text-base text-slate-600 font-bold",children:[e.jsx(Qe,{className:"w-5 h-5 mr-4 mt-0.5 text-blue-200 shrink-0"}),A]},F))})]},t.version))})]})]}):e.jsxs("div",{className:"flex-1 flex flex-col",children:[i==="staff_management"&&e.jsxs("div",{className:"flex border-b bg-slate-50/30 px-6 md:px-8 py-4 gap-4 overflow-x-auto no-scrollbar",children:[e.jsxs("button",{type:"button",onClick:()=>d("list"),className:`flex items-center space-x-2 px-4 py-2 rounded-xl font-black text-sm transition-all cursor-pointer shrink-0 ${r==="list"?"bg-blue-600 text-white shadow-md":"text-slate-400 hover:text-slate-600"}`,children:[e.jsx(cs,{className:"w-4 h-4 pointer-events-none"}),e.jsx("span",{children:"員工名單"})]}),e.jsxs("button",{type:"button",onClick:()=>d("departments"),className:`flex items-center space-x-2 px-4 py-2 rounded-xl font-black text-sm transition-all cursor-pointer shrink-0 ${r==="departments"?"bg-blue-600 text-white shadow-md":"text-slate-400 hover:text-slate-600"}`,children:[e.jsx(ds,{className:"w-4 h-4 pointer-events-none"}),e.jsx("span",{children:"部門設定"})]}),e.jsxs("button",{type:"button",onClick:()=>d("admins"),className:`flex items-center space-x-2 px-4 py-2 rounded-xl font-black text-sm transition-all cursor-pointer shrink-0 ${r==="admins"?"bg-blue-600 text-white shadow-md":"text-slate-400 hover:text-slate-600"}`,children:[e.jsx(qe,{className:"w-4 h-4 pointer-events-none"}),e.jsx("span",{children:"系統帳號 (L1/L2)"})]})]}),e.jsxs("div",{className:"p-6 md:p-8 border-b flex flex-col md:flex-row justify-between items-center bg-slate-50/50 gap-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-4 w-full md:w-auto",children:[e.jsx("h3",{className:"text-xl font-black text-slate-800 whitespace-nowrap",children:i==="announcements"?"內容公告維護":i==="staff_management"?r==="list"?"員工名單管理":r==="departments"?"部門架構設定":"系統帳號權限管理":"系統資訊"}),i==="staff_management"&&r==="list"&&e.jsxs("div",{className:"flex items-center bg-white border-2 border-slate-100 rounded-xl px-3 py-1.5 shadow-sm w-full md:w-auto",children:[e.jsx(tt,{className:"w-4 h-4 text-slate-400 mr-2"}),e.jsxs("select",{value:W,onChange:t=>Te(t.target.value),className:"text-sm font-bold text-slate-600 outline-none bg-transparent cursor-pointer min-w-[100px]",children:[e.jsx("option",{value:"全部",children:"全部部門"}),y.map(t=>e.jsx("option",{value:t,children:t},t))]})]})]}),e.jsxs("button",{type:"button",onClick:()=>{ze(),i==="staff_management"&&r==="departments"?I(!0):T(!0)},className:"px-10 py-3 bg-blue-600 text-white font-black rounded-2xl shadow-lg active:scale-95 flex items-center justify-center space-x-2 w-full md:w-auto cursor-pointer",children:[e.jsx(kt,{className:"w-5 h-5 pointer-events-none"}),e.jsx("span",{children:"新增項目"})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx("div",{className:"hidden md:block overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-slate-50 text-[11px] font-black text-slate-400 uppercase tracking-widest border-b",children:e.jsxs("tr",{children:[i==="staff_management"&&r==="departments"?e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"px-10 py-5",children:"部門名稱"}),e.jsx("th",{className:"px-10 py-5",children:"成員人數"})]}):i==="announcements"?e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"px-10 py-5",children:"公告內容"}),e.jsx("th",{className:"px-10 py-5",children:"發佈狀態"})]}):i==="logs"?e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"px-10 py-5",children:"時間"}),e.jsx("th",{className:"px-10 py-5",children:"操作人員"}),e.jsx("th",{className:"px-10 py-5",children:"功能模組"}),e.jsx("th",{className:"px-10 py-5",children:"操作類型"}),e.jsx("th",{className:"px-10 py-5",children:"執行詳情"})]}):e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"px-10 py-5",children:"姓名"}),e.jsx("th",{className:"px-10 py-5",children:"部門"}),e.jsx("th",{className:"px-10 py-5",children:"帳號類型"}),e.jsx("th",{className:"px-10 py-5",children:"驗證 Email"})]}),i!=="logs"&&e.jsx("th",{className:"px-10 py-5 text-center",children:"操作"})]})}),e.jsx("tbody",{className:"divide-y text-base font-bold text-slate-700",children:i==="logs"?Ge.filter(t=>{const u=m(t.createdAt,"yyyy-MM-dd");return Re?u===Re:Be?u.startsWith(Be):!0}).slice(0,it).map(t=>e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[e.jsx("td",{className:"px-10 py-5 text-xs text-slate-400",children:m(t.createdAt,"MM/dd HH:mm:ss")}),e.jsx("td",{className:"px-10 py-5 text-sm",children:t.userName}),e.jsx("td",{className:"px-10 py-5",children:e.jsx("span",{className:"px-3 py-1 bg-slate-100 rounded-lg text-[10px] uppercase",children:t.module})}),e.jsx("td",{className:"px-10 py-5",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-[10px] ${t.action==="login"?"bg-emerald-50 text-emerald-600":t.action==="delete"?"bg-red-50 text-red-600":t.action==="create"?"bg-blue-50 text-blue-600":"bg-amber-50 text-amber-600"}`,children:t.action==="login"?"登入系統":t.action==="create"?"新增資料":t.action==="update"?"編輯更新":t.action==="delete"?"刪除資料":"登出系統"})}),e.jsx("td",{className:"px-10 py-5 text-sm font-medium text-slate-500 max-w-xs truncate",title:t.details,children:t.details})]},t.id)):i==="announcements"?N.map(t=>e.jsxs("tr",{className:"hover:bg-slate-50",children:[e.jsx("td",{className:"px-10 py-6",children:t.content}),e.jsx("td",{className:"px-10 py-6",children:e.jsx("span",{className:`inline-block px-4 py-1.5 rounded-full text-xs font-black whitespace-nowrap ${t.isActive?"bg-green-100 text-green-700":"bg-slate-100 text-slate-400"}`,children:t.isActive?"顯示中":"已停用"})}),e.jsx("td",{className:"px-10 py-6 text-center",children:e.jsxs("div",{className:"flex justify-center space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>{ie(t),ge(t.content),Ce(t.isActive),T(!0)},className:"p-4 bg-slate-50 hover:bg-blue-50 text-slate-400 hover:text-blue-600 rounded-xl cursor-pointer",children:e.jsx(oe,{className:"w-5 h-5 pointer-events-none"})}),e.jsx("button",{type:"button",onClick:()=>Ae(t.id,"ann"),className:"p-4 bg-slate-50 hover:bg-red-50 text-slate-400 hover:text-red-600 rounded-xl cursor-pointer",children:e.jsx(ce,{className:"w-5 h-5 pointer-events-none"})})]})})]},t.id)):i==="staff_management"&&r==="departments"?y.map((t,u)=>e.jsxs("tr",{className:"hover:bg-slate-50",children:[e.jsx("td",{className:"px-10 py-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(tt,{className:"w-5 h-5 text-blue-500"}),e.jsx("span",{children:t})]})}),e.jsxs("td",{className:"px-10 py-6 text-slate-400",children:[L.filter(A=>A.department===t).length," 位成員"]}),e.jsx("td",{className:"px-10 py-6 text-center",children:e.jsxs("div",{className:"flex justify-center space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>{me(u),g(t),I(!0)},className:"p-4 bg-slate-50 hover:bg-blue-50 text-slate-400 hover:text-blue-600 rounded-xl cursor-pointer",children:e.jsx(oe,{className:"w-5 h-5 pointer-events-none"})}),e.jsx("button",{type:"button",onClick:()=>Ae(t,"dept",u),className:"p-4 bg-slate-50 hover:bg-red-50 text-slate-400 hover:text-red-600 rounded-xl cursor-pointer",children:e.jsx(ce,{className:"w-5 h-5 pointer-events-none"})})]})})]},t)):rt.map(t=>e.jsxs("tr",{className:"hover:bg-slate-50",children:[e.jsx("td",{className:"px-10 py-6",children:t.name}),i==="staff_management"&&e.jsx("td",{className:"px-10 py-6 text-slate-400",children:t.department}),e.jsx("td",{className:"px-10 py-6",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-[10px] font-black ${t.role==="admin_l1"||t.email==="sysop"?"bg-orange-600 text-white":t.role==="admin_l2"?"bg-purple-100 text-purple-600":"bg-blue-50 text-blue-600"}`,children:t.role==="admin_l1"||t.email==="sysop"?"最高管理員 (L1)":t.role==="admin_l2"?"系統管理員 (L2)":"一般同仁"})}),e.jsx("td",{className:"px-10 py-6 text-slate-400",children:t.email||"---"}),e.jsx("td",{className:"px-10 py-6 text-center",children:e.jsxs("div",{className:"flex justify-center space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>{ie(t),ke(t.name),be(t.email),Se(t.department||""),h(t.role),T(!0)},className:`p-4 bg-slate-50 hover:bg-blue-50 text-slate-400 hover:text-blue-600 rounded-xl cursor-pointer ${(t.role==="admin_l1"||t.email==="sysop")&&a.role!=="admin_l1"&&a.email!=="sysop"?"invisible pointer-events-none":""}`,children:e.jsx(oe,{className:"w-5 h-5 pointer-events-none"})}),e.jsx("button",{type:"button",onClick:()=>Ae(t.id,"user"),className:`p-4 bg-slate-50 hover:bg-red-50 text-slate-400 hover:text-red-600 rounded-xl cursor-pointer ${t.role==="admin_l1"||t.email==="sysop"?"invisible pointer-events-none":""}`,children:e.jsx(ce,{className:"w-5 h-5 pointer-events-none"})})]})})]},t.id))})]})}),e.jsx("div",{className:"md:hidden divide-y",children:i==="announcements"?N.map(t=>e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("span",{className:`px-4 py-1 rounded-full text-[10px] font-black whitespace-nowrap ${t.isActive?"bg-green-100 text-green-700":"bg-slate-100 text-slate-400"}`,children:t.isActive?"顯示中":"已停用"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>{ie(t),ge(t.content),Ce(t.isActive),T(!0)},className:"p-4 bg-slate-50 rounded-xl text-slate-400 active:scale-90",children:e.jsx(oe,{className:"w-4 h-4"})}),e.jsx("button",{type:"button",onClick:()=>Ae(t.id,"ann"),className:"p-4 bg-red-50 rounded-xl text-red-400 active:scale-90",children:e.jsx(ce,{className:"w-4 h-4"})})]})]}),e.jsx("p",{className:"font-bold text-slate-700 leading-relaxed",children:t.content})]},t.id)):i==="staff_management"&&r==="departments"?e.jsx("div",{className:"p-6 grid grid-cols-1 gap-4",children:y.map((t,u)=>e.jsxs("div",{className:"bg-white border-2 border-slate-100 p-6 rounded-3xl flex justify-between items-center shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-50 text-blue-600 rounded-xl flex items-center justify-center",children:e.jsx(tt,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-black text-slate-800",children:t}),e.jsxs("p",{className:"text-[10px] text-slate-400 font-bold",children:[L.filter(A=>A.department===t).length," 位成員"]})]})]}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{type:"button",onClick:()=>{me(u),g(t),I(!0)},className:"p-4 text-slate-400 active:scale-90",children:e.jsx(oe,{className:"w-5 h-5"})}),e.jsx("button",{type:"button",onClick:()=>Ae(t,"dept",u),className:"p-4 text-red-400 active:scale-90",children:e.jsx(ce,{className:"w-5 h-5"})})]})]},t))}):i==="logs"?e.jsx("div",{className:"divide-y",children:Ge.filter(t=>{const u=m(t.createdAt,"yyyy-MM-dd");return Re?u===Re:Be?u.startsWith(Be):!0}).slice(0,it).map(t=>e.jsxs("div",{className:"p-6 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsx("span",{className:"text-slate-400",children:m(t.createdAt,"yyyy/MM/dd HH:mm:ss")}),e.jsx("span",{className:`px-2 py-0.5 rounded-full ${t.action==="login"?"bg-emerald-50 text-emerald-600":t.action==="delete"?"bg-red-50 text-red-600":"bg-blue-50 text-blue-600"}`,children:t.action})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-black text-slate-800",children:t.userName}),e.jsx("span",{className:"text-[10px] text-slate-400 bg-slate-100 px-2 py-0.5 rounded",children:t.module})]}),e.jsx("p",{className:"text-sm text-slate-500 font-bold leading-relaxed",children:t.details})]},t.id))}):rt.map(t=>e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-slate-100 rounded-xl flex items-center justify-center font-black text-slate-500",children:t.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-black text-slate-800",children:t.name}),t.department&&e.jsx("p",{className:"text-[10px] text-blue-600 font-bold",children:t.department})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>{ie(t),ke(t.name),be(t.email),Se(t.department||""),h(t.role),T(!0)},className:`p-4 bg-slate-50 rounded-xl text-slate-400 active:scale-90 ${(t.role==="admin_l1"||t.email==="sysop")&&a.role!=="admin_l1"&&a.email!=="sysop"?"invisible pointer-events-none":""}`,children:e.jsx(oe,{className:"w-4 h-4"})}),e.jsx("button",{type:"button",onClick:()=>Ae(t.id,"user"),className:`p-4 bg-red-50 rounded-xl text-red-400 active:scale-90 ${t.role==="admin_l1"||t.email==="sysop"?"hidden":""}`,children:e.jsx(ce,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"bg-slate-50 p-4 rounded-2xl border border-slate-100",children:[e.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest mb-1",children:"Email"}),e.jsx("p",{className:"text-sm font-bold text-slate-600 break-all",children:t.email||"尚未設定"})]})]},t.id))})]})]})}),de&&e.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in",children:e.jsxs("div",{className:"bg-white rounded-[2.5rem] shadow-2xl w-full max-w-sm overflow-hidden flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"flex justify-between items-center px-8 py-6 border-b shrink-0",children:[e.jsx("h3",{className:"text-xl font-black",children:K?"編輯項目":"新增項目"}),e.jsx("button",{type:"button",onClick:()=>T(!1),className:"p-2 text-slate-300 hover:text-slate-800 cursor-pointer",children:e.jsx(Ne,{className:"w-6 h-6 pointer-events-none"})})]}),e.jsxs("div",{className:"p-8 space-y-6 overflow-y-auto no-scrollbar flex-1",children:[D&&e.jsxs("div",{className:"p-3 bg-red-50 text-red-600 rounded-xl text-xs font-bold border border-red-100 flex items-center animate-shake",children:[e.jsx(Ve,{className:"w-4 h-4 mr-2"}),D]}),i==="announcements"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"公告內容"}),e.jsx("textarea",{value:le,onChange:t=>ge(t.target.value),className:Z+" h-32",placeholder:"請輸入欲發佈之內容..."})]}),e.jsxs("button",{type:"button",onClick:()=>Ce(!je),className:"flex items-center space-x-3 cursor-pointer",children:[je?e.jsx(Xe,{className:"w-12 h-12 text-blue-600"}):e.jsx(et,{className:"w-12 h-12 text-slate-300"}),e.jsx("span",{className:"font-black text-slate-700",children:je?"公告顯示中":"公告已下線"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"姓名"}),e.jsx("input",{type:"text",value:he,onChange:t=>ke(t.target.value),className:Z})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Email (用於驗證)"}),e.jsx("input",{type:"email",value:ue,onChange:t=>be(t.target.value),className:Z})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"帳號權限"}),e.jsxs("select",{value:s,onChange:t=>h(t.target.value),className:Z+" custom-select",children:[e.jsx("option",{value:"user",children:"一般同仁 (僅限預約)"}),e.jsx("option",{value:"admin_l1",children:"最高管理員 (L1 全權限)"}),e.jsx("option",{value:"admin_l2",children:"系統管理員 (L2 次管理員)"})]})]}),i==="staff_management"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"部門"}),e.jsxs("select",{value:fe,onChange:t=>Se(t.target.value),className:Z+" custom-select",children:[e.jsx("option",{value:"",children:"請選擇"}),y.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),(s==null?void 0:s.startsWith("admin"))&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"設定登入密碼"}),e.jsx("input",{type:"password",value:H,onChange:t=>Ee(t.target.value),className:Z})]})]})]}),e.jsxs("div",{className:"px-8 py-6 bg-slate-50 flex justify-end gap-3 border-t shrink-0",children:[e.jsx("button",{type:"button",disabled:k,onClick:()=>T(!1),className:"px-6 py-2 text-slate-400 font-bold hover:bg-slate-100 rounded-xl cursor-pointer disabled:opacity-50",children:"取消"}),e.jsx("button",{type:"button",disabled:k,onClick:i==="announcements"?It:Lt,className:"px-10 py-3 bg-blue-600 text-white font-black rounded-xl shadow-lg active:scale-95 flex-1 md:flex-none cursor-pointer text-sm disabled:bg-slate-400",children:k?"處理中...":"確認儲存"})]})]})}),ae&&e.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in",children:e.jsxs("div",{className:"bg-white rounded-[2.5rem] shadow-2xl w-full max-w-sm overflow-hidden animate-in zoom-in-95",children:[e.jsxs("div",{className:"px-8 py-6 border-b flex justify-between items-center",children:[e.jsx("h3",{className:"text-xl font-black",children:xe!==null?"編輯部門":"新增部門"}),e.jsx("button",{type:"button",onClick:()=>I(!1),className:"p-2 text-slate-300 hover:text-slate-800 cursor-pointer",children:e.jsx(Ne,{className:"w-6 h-6 pointer-events-none"})})]}),e.jsxs("div",{className:"p-8 space-y-6",children:[D&&e.jsxs("div",{className:"p-3 bg-red-50 text-red-600 rounded-xl text-xs font-bold border animate-shake",children:[e.jsx(Ve,{className:"w-4 h-4 mr-2"}),D]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"部門名稱"}),e.jsx("input",{type:"text",autoFocus:!0,value:c,onChange:t=>g(t.target.value),className:Z})]})]}),e.jsxs("div",{className:"px-8 py-6 bg-slate-50 flex justify-end gap-3 border-t",children:[e.jsx("button",{type:"button",onClick:()=>I(!1),className:"px-6 py-2 text-slate-400 font-bold cursor-pointer",children:"取消"}),e.jsx("button",{type:"button",onClick:Et,className:"px-10 py-3 bg-blue-600 text-white font-black rounded-xl active:scale-95 flex-1 md:flex-none cursor-pointer text-sm",children:"確認儲存"})]})]})})]})},at=["週日","週一","週二","週三","週四","週五","週六"],Ss=()=>{var Ee;const[a,n]=l.useState(!1),[i,p]=l.useState(!1),[r,d]=l.useState(null),[w,$]=l.useState(null),[L,S]=l.useState(!1),[N,M]=l.useState([]),[y,J]=l.useState([]),[se,E]=l.useState(!1),[ee,f]=l.useState(!1),[V,C]=l.useState(!1),[R,v]=l.useState(null),[o,O]=l.useState(new Date),[B,z]=l.useState("bookings"),[ne,q]=l.useState(!1),[de,T]=l.useState(""),[ae,I]=l.useState(""),[K,ie]=l.useState(""),[xe,me]=l.useState(""),[Ie,ve]=l.useState(!1),[re,ye]=l.useState(!1),[Le,pe]=l.useState(null),[P,Je]=l.useState({allowedDomain:"yi-jun.com",corpSsid:".YIJUN",guestSsid:".YJ_VIP",guestPwd:"@1681688",showQuickBookQr:!0,showWifiInfo:!0,requireGoogleLogin:!0}),he=l.useMemo(()=>{const s=window.location.origin+window.location.pathname;return`${s.endsWith("/")?s:s+"/"}?mode=express`},[]),ke=l.useMemo(()=>`WIFI:S:${P.guestSsid};T:WPA;P:${P.guestPwd};;`,[P]),ue=async()=>{const[s,h,c]=await Promise.all([x.getBookings(),x.getAnnouncements(),x.getSystemSettings()]);M(s),J(h),Je(c)},be=async()=>{var s,h;me("");try{const c=new bs,D=(await fs(mt,c)).user.email;if(!D){alert("無法取得 Google 帳號 Email，請重試。");return}const k=(await x.getUsers()).find(G=>G.email.toLowerCase()===D.toLowerCase());k?($(k),d(k),localStorage.setItem("gw_session",JSON.stringify(k)),(s=k.role)!=null&&s.startsWith("admin")&&n(!0),x.addLog({userId:k.id,userName:k.name,action:"login",module:"系統登入",details:`${(h=k.role)!=null&&h.startsWith("admin")?"管理員":"一般同仁"} ${k.name} 經由 Google 驗證登入`,createdAt:Date.now()}),window.location.search.includes("mode=express")&&setTimeout(()=>E(!0),300)):(me(`帳號 ${D} 不在公司預約白名單內，請聯繫行政單位。`),await mt.signOut())}catch(c){console.error("Google Login Error Details:",c);let g="登入過程發生錯誤";c.code==="auth/unauthorized-domain"?g="【授權網域錯誤】請至 Firebase 後台新增 jamesanna.github.io 到 Authorized domains。":c.code==="auth/popup-blocked"?g="【彈窗被攔截】請允許此網頁開啟彈出式視窗。":g+=`：${c.message||"未知原因"}`,alert(g)}},fe=()=>{var s;r&&x.addLog({userId:r.id,userName:r.name,action:"logout",module:"系統登入",details:`${(s=r.role)!=null&&s.startsWith("admin")?"管理員":"一般同仁"} ${r.name} 登出系統`,createdAt:Date.now()}),localStorage.removeItem("gw_session"),localStorage.removeItem("persisted_admin_session"),$(null),d(null),n(!1),p(!1),E(!1),v(null),setTimeout(()=>{alert("帳號已成功登出")},100)};l.useEffect(()=>{if(ue(),(async()=>{var D;const c=localStorage.getItem("gw_session");if(c){const _=await x.getUsers(),k=JSON.parse(c),G=_.find(W=>W.id===k.id);G?($(G),d(G),(D=G.role)!=null&&D.startsWith("admin")&&n(!0)):localStorage.removeItem("gw_session")}const g=localStorage.getItem("persisted_admin_session");if(g)try{const _=JSON.parse(g),W=(await x.getUsers()).filter(Te=>{var Ge;return(Ge=Te.role)==null?void 0:Ge.startsWith("admin")}).find(Te=>Te.id===_.id);W?(d(W),n(!0),T(W.email),ye(!0)):localStorage.removeItem("persisted_admin_session")}catch{localStorage.removeItem("persisted_admin_session")}})(),new URLSearchParams(window.location.search).get("mode")==="express"){S(!0);const c=new Date;O(c),Y(c)!==0&&Y(c)!==6&&!Pe[m(c,"yyyy-MM-dd")]&&localStorage.getItem("gw_session")&&setTimeout(()=>E(!0),500)}else S(Math.random()>.5)},[]);const Se=async()=>{const c=(await x.getUsers()).filter(g=>{var D;return(D=g.role)==null?void 0:D.startsWith("admin")}).find(g=>g.email===de);c&&c.password===ae?(n(!0),d(c),q(!1),ie(""),I(""),re?localStorage.setItem("persisted_admin_session",JSON.stringify(c)):localStorage.removeItem("persisted_admin_session"),x.addLog({userId:c.id,userName:c.name,action:"login",module:"系統登入",details:`管理員 ${c.name} (${c.email}) 登入後台`,createdAt:Date.now()})):ie("管理帳號或密碼錯誤")},le=s=>{O(s);const h=m(s,"yyyy-MM-dd"),c=Y(s)===0||Y(s)===6,g=h<m(new Date,"yyyy-MM-dd"),D=!!Pe[h];!c&&!g&&!D&&(v(null),E(!0))},ge=async(s,h,c,g,D,_)=>{if(_){const G=(await x.getBookings()).map(W=>W.id===_?{...W,userId:s,userName:h,startTime:c,endTime:g,purpose:D}:W);localStorage.setItem("meeting_room_bookings",JSON.stringify(G)),M(G)}else{const k={id:`book_${Date.now()}`,userId:s,userName:h,date:m(o,"yyyy-MM-dd"),startTime:c,endTime:g,purpose:D,createdAt:Date.now()};await x.saveBooking(k);const G=await x.getBookings();M(G)}if(E(!1),v(null),window.location.search.includes("mode=express")){const k=window.location.origin+window.location.pathname;window.history.replaceState({},document.title,k)}},je=async()=>{if(!Le)return;await x.deleteBooking(Le);const s=await x.getBookings();M(s),pe(null)},Ce=()=>{fe()},H=l.useMemo(()=>{const s=m(o,"yyyy-MM");return N.filter(h=>h.date.startsWith(s)).sort((h,c)=>h.date.localeCompare(c.date)||h.startTime.localeCompare(c.startTime))},[N,o]);return N.filter(s=>s.date===m(o,"yyyy-MM-dd")).sort((s,h)=>s.startTime.localeCompare(h.startTime)),m(o,"yyyy-MM-dd")<m(new Date,"yyyy-MM-dd"),a?e.jsxs("div",{className:"flex h-screen bg-slate-50 overflow-hidden relative",children:[e.jsx(ys,{activeTab:B,setActiveTab:z,onLogout:Ce,onReturnToFrontend:()=>n(!1),isOpen:i,onClose:()=>p(!1)}),Le&&e.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/80 backdrop-blur-md animate-in fade-in",children:e.jsxs("div",{className:"bg-white rounded-[2rem] p-8 max-w-xs w-full shadow-2xl border border-red-100 animate-in zoom-in-95 text-center",children:[e.jsx(He,{className:"w-16 h-16 text-red-500 mx-auto mb-6 animate-pulse"}),e.jsx("h3",{className:"text-xl font-black text-slate-800 mb-3",children:"刪除此筆預約？"}),e.jsxs("p",{className:"text-sm text-slate-500 mb-8 leading-relaxed",children:["執行後此時段將重新釋出，",e.jsx("br",{}),"該動作無法復原。"]}),e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsx("button",{onClick:je,className:"w-full py-4 bg-red-600 text-white font-black rounded-xl shadow-lg shadow-red-200 active:scale-95",children:"確認執行刪除"}),e.jsx("button",{onClick:()=>pe(null),className:"w-full py-3 text-slate-400 font-bold hover:bg-slate-50 rounded-xl",children:"取消返回"})]})]})}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsxs("header",{className:"bg-white border-b h-16 flex items-center justify-between px-4 md:px-6 shadow-sm shrink-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-3 overflow-hidden",children:[e.jsx("button",{type:"button",onClick:()=>p(!0),className:"md:hidden p-2 hover:bg-slate-100 rounded-lg text-slate-500 shrink-0",children:e.jsx(xs,{className:"w-6 h-6 pointer-events-none"})}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:space-x-2 overflow-hidden",children:[e.jsx("h2",{className:"text-sm md:text-base font-bold text-slate-800 tracking-tight whitespace-nowrap",children:"後台管理"}),e.jsxs("div",{className:"flex items-center space-x-1.5 md:space-x-2",children:[e.jsx("span",{className:"px-1.5 py-0.5 v2-badge text-white text-[9px] rounded-md font-bold shrink-0",children:Fe}),e.jsxs("div",{className:"flex items-center space-x-1 bg-slate-800 text-white px-2 py-0.5 rounded-md admin-mode-pulse shrink-0",children:[e.jsx(qe,{className:"w-2.5 h-2.5 text-blue-400 pointer-events-none"}),e.jsx("span",{className:"text-[9px] font-black tracking-widest uppercase hidden xs:inline",children:"管理模式"})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-3 shrink-0",children:[e.jsxs("div",{className:"hidden sm:flex flex-col items-end",children:[e.jsxs("span",{className:"text-xs font-bold text-slate-800",children:["Admin: ",r==null?void 0:r.name]}),e.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-widest",children:"Sysop"})]}),e.jsx("div",{className:"w-9 h-9 bg-slate-800 rounded-xl flex items-center justify-center text-white font-bold text-xs shrink-0 shadow-lg shadow-slate-200",children:(Ee=r==null?void 0:r.name)==null?void 0:Ee.charAt(0)})]})]}),e.jsx("main",{className:"flex-1 overflow-y-auto p-4 md:p-6 no-scrollbar",children:B==="bookings"?e.jsxs("div",{className:"space-y-6 max-w-5xl mx-auto pb-10",children:[e.jsx("div",{className:"bg-white rounded-[2rem] md:rounded-[2.5rem] shadow-2xl shadow-slate-200/40 border border-slate-100 p-4 md:p-10 transition-all overflow-visible relative",children:e.jsx(ht,{bookings:N,selectedDate:o,onDateSelect:le})}),e.jsxs("div",{className:"bg-white rounded-[2rem] shadow-sm border overflow-hidden",children:[e.jsxs("div",{className:"p-6 md:p-8 bg-slate-50/50 border-b flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-slate-800 text-lg",children:[m(o,"yyyy年MM月")," 預約總覽清單"]}),e.jsxs("p",{className:"text-xs font-medium text-slate-400",children:["目前共 ",H.length," 筆正式行程"]})]}),e.jsxs("button",{type:"button",onClick:()=>{const s=m(o,"yyyy-MM-dd"),h=Y(o)===0||Y(o)===6,c=s<m(new Date,"yyyy-MM-dd"),g=!!Pe[s];if(h||c||g){alert(`該日期 (${g?Pe[s]:"非工作日"}) 不開放預約登記`);return}v(null),E(!0)},className:"flex items-center justify-center space-x-2 px-6 py-2.5 bg-[#e54304] text-white rounded-xl font-medium text-sm shadow-lg hover:bg-black transition-all active:scale-95 w-full sm:w-auto",children:[e.jsx(kt,{className:"w-4 h-4 pointer-events-none"}),e.jsx("span",{children:"新增預約"})]})]}),e.jsx("div",{className:"hidden md:block overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-slate-50 text-[10px] font-semibold text-slate-400 uppercase tracking-widest border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-8 py-4 text-center",children:"日期"}),e.jsx("th",{className:"px-8 py-4",children:"時段"}),e.jsx("th",{className:"px-8 py-4",children:"預約人"}),e.jsx("th",{className:"px-8 py-4",children:"用途"}),e.jsx("th",{className:"px-8 py-4 text-center",children:"操作"})]})}),e.jsx("tbody",{className:"divide-y text-sm",children:H.length>0?H.map(s=>e.jsxs("tr",{className:`transition-colors ${s.date===m(o,"yyyy-MM-dd")?"bg-orange-50/50":"hover:bg-slate-50"}`,children:[e.jsx("td",{className:"px-8 py-4 text-center",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-[10px] text-slate-400 font-bold uppercase",children:at[Y(new Date(s.date))]}),e.jsx("span",{className:"text-sm font-black text-slate-700",children:m(new Date(s.date),"dd")})]})}),e.jsxs("td",{className:"px-8 py-4 font-bold text-blue-600 whitespace-nowrap",children:[s.startTime," - ",s.endTime]}),e.jsx("td",{className:"px-8 py-4 font-bold text-slate-700 whitespace-nowrap",children:s.userName}),e.jsx("td",{className:"px-8 py-4 text-slate-500 font-medium truncate max-w-xs",children:s.purpose}),e.jsx("td",{className:"px-8 py-4",children:e.jsxs("div",{className:"flex justify-center items-center space-x-2",children:[e.jsx("button",{onClick:()=>{O(new Date(s.date)),v(s),E(!0)},className:"p-4 text-slate-400 hover:text-blue-600 active:scale-90 bg-slate-50 hover:bg-blue-50 rounded-xl transition-all",children:e.jsx(oe,{className:"w-4 h-4 pointer-events-none"})}),e.jsx("button",{onClick:()=>pe(s.id),className:"p-4 text-slate-400 hover:text-red-600 active:scale-90 bg-slate-50 hover:bg-red-50 rounded-xl transition-all",children:e.jsx(ce,{className:"w-4 h-4 pointer-events-none"})})]})})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-8 py-20 text-center text-slate-300 font-medium italic",children:"本月份尚無預約資料"})})})]})}),e.jsx("div",{className:"md:hidden divide-y",children:H.length>0?H.map(s=>e.jsxs("div",{className:`p-5 space-y-3 ${s.date===m(o,"yyyy-MM-dd")?"bg-orange-50/30":"bg-white"}`,children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"bg-slate-900 text-white px-2 py-1 rounded-md text-[10px] font-black",children:m(new Date(s.date),"MM/dd")}),e.jsxs("div",{className:"bg-blue-50 text-blue-600 px-3 py-1 rounded-lg text-[10px] font-black",children:[at[Y(new Date(s.date))]," ",s.startTime," - ",s.endTime]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>{O(new Date(s.date)),v(s),E(!0)},className:"p-5 text-slate-500 bg-slate-50 rounded-xl active:scale-90",children:e.jsx(oe,{className:"w-4 h-4 pointer-events-none"})}),e.jsx("button",{onClick:()=>pe(s.id),className:"p-5 text-red-400 bg-red-50 rounded-xl active:scale-90",children:e.jsx(ce,{className:"w-4 h-4 pointer-events-none"})})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-base font-black text-slate-800",children:s.userName}),e.jsx("p",{className:"text-xs text-slate-500 font-bold mt-1",children:s.purpose})]})]},s.id)):e.jsx("div",{className:"p-10 text-center text-slate-300 font-medium italic",children:"本月份尚無預約資料"})})]})]}):e.jsx(ks,{currentUser:r,onDataUpdate:ue})})]}),se&&e.jsx(ut,{date:o,googleUser:r,isInternalNetwork:!0,onGoogleLogin:()=>{},onGoogleLogout:fe,editingBooking:R,onClose:()=>{E(!1),v(null)},onSave:ge,existingBookings:N.filter(s=>s.date===m(o,"yyyy-MM-dd")),requireGoogleLogin:P.requireGoogleLogin})]}):e.jsxs("div",{className:"min-h-screen bg-white flex flex-col relative text-slate-900 overflow-x-hidden",children:[e.jsx(vs,{announcements:y}),e.jsxs("header",{className:"bg-white/80 backdrop-blur-md shadow-sm py-3 px-4 md:px-12 flex justify-between items-center border-b sticky top-0 z-30 shrink-0",children:[e.jsxs("div",{className:"flex items-center space-x-3 overflow-hidden",children:[e.jsx("div",{className:"w-9 h-9 v2-badge rounded-xl flex items-center justify-center text-white shadow-lg shrink-0",children:e.jsx(dt,{className:"w-5 h-5 pointer-events-none"})}),e.jsxs("div",{className:"overflow-hidden",children:[e.jsx("h1",{className:"text-base md:text-lg font-semibold text-slate-800 tracking-tight leading-none truncate",children:Ye}),e.jsxs("div",{className:"flex items-center mt-1 space-x-2",children:[e.jsx("span",{className:"text-[9px] md:text-[10px] text-orange-500 font-medium tracking-widest uppercase shrink-0",children:Fe}),L&&e.jsxs("div",{className:"flex items-center text-[8px] font-medium text-green-600 bg-green-50 px-1.5 py-0.5 rounded-md border border-green-100 shrink-0",children:[e.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full mr-1 wifi-pulse"}),e.jsx("span",{className:"hidden xs:inline",children:P.corpSsid})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-1.5 md:space-x-3 shrink-0",children:[w?e.jsxs("div",{className:"flex items-center bg-slate-900 text-white rounded-full pl-1 pr-3 py-1 border border-slate-800 shadow-sm animate-in fade-in slide-in-from-right-4",children:[e.jsx("div",{className:"w-7 h-7 bg-blue-600 rounded-full flex items-center justify-center text-[10px] font-black shrink-0 shadow-inner",children:w.name.charAt(0)}),e.jsx("span",{className:"ml-2 text-[11px] font-bold hidden sm:inline whitespace-nowrap",children:w.name}),e.jsx("button",{type:"button",onClick:fe,className:"ml-2 p-1 text-slate-500 hover:text-red-400 transition-colors",title:"登出帳號",children:e.jsx(nt,{className:"w-3.5 h-3.5 pointer-events-none"})})]}):e.jsxs("button",{type:"button",onClick:be,className:"flex items-center space-x-2 bg-blue-50 text-blue-600 px-3 py-1.5 rounded-full border border-blue-100 hover:bg-blue-600 hover:text-white transition-all text-[11px] font-bold shadow-sm",children:[e.jsx(gt,{className:"w-4 h-4 pointer-events-none"}),e.jsx("span",{children:"登入"})]}),e.jsx("div",{className:"h-4 w-[1px] bg-slate-200 hidden xs:block"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[P.showQuickBookQr&&e.jsx("button",{type:"button",onClick:()=>f(!0),className:"p-2 text-slate-300 hover:text-orange-600 hover:bg-orange-50 rounded-xl transition-all",children:e.jsx(yt,{className:"w-5 h-5 pointer-events-none"})}),P.showWifiInfo&&e.jsx("button",{type:"button",onClick:()=>C(!0),className:"p-2 text-slate-300 hover:text-blue-500 hover:bg-blue-50 rounded-xl transition-all",children:e.jsx(We,{className:"w-5 h-5 pointer-events-none"})}),e.jsx("button",{type:"button",onClick:()=>{var s;(s=r==null?void 0:r.role)!=null&&s.startsWith("admin")?n(!0):q(!0)},className:"p-2 text-slate-300 hover:text-slate-800 transition-colors",children:e.jsx(wt,{className:"w-5 h-5 pointer-events-none"})})]})]})]}),xe&&e.jsxs("div",{className:"mx-4 md:mx-12 mt-4 p-4 bg-red-50 border border-red-100 rounded-2xl flex items-center text-red-600 text-sm font-bold shadow-sm animate-in slide-in-from-top",children:[e.jsx(Ve,{className:"w-5 h-5 mr-3 shrink-0 pointer-events-none"}),xe,e.jsx("button",{type:"button",onClick:()=>me(""),className:"ml-auto p-1.5 hover:bg-red-100 rounded-full transition-colors",children:e.jsx(Ne,{className:"w-4 h-4 pointer-events-none"})})]}),e.jsxs("main",{className:"max-w-3xl mx-auto w-full flex-1 flex flex-col no-scrollbar",children:[e.jsx("div",{className:"py-6 md:py-10 px-4 float-in",children:e.jsx("div",{className:"bg-white rounded-[2rem] md:rounded-[2.5rem] shadow-2xl shadow-slate-200/40 border border-slate-100 p-4 md:p-10 transition-all overflow-visible",children:e.jsx(ht,{bookings:N,selectedDate:o,onDateSelect:le})})}),e.jsx("div",{className:"px-4 md:px-6 space-y-6 md:space-y-8 pb-10 overflow-x-hidden",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between px-2",children:[e.jsxs("h3",{className:"font-semibold text-slate-800 text-lg flex items-center",children:[e.jsx("span",{className:"w-1.5 h-6 v2-badge rounded-full mr-3"}),m(o,"yyyy年MM月")," 預約詳情"]}),e.jsxs("span",{className:"text-[10px] font-medium text-slate-300 tracking-widest uppercase",children:["Monthly Total ",H.length]})]}),H.length>0?e.jsx("div",{className:"grid gap-3",children:H.map(s=>{const h=new Date(s.date),c=s.date<m(new Date,"yyyy-MM-dd");return e.jsxs("div",{className:`bg-white border p-4 md:p-5 rounded-[1.5rem] md:rounded-[2rem] flex items-center space-x-4 md:space-x-5 hover:border-orange-200 hover:bg-orange-50/10 transition-all group ${s.date===m(o,"yyyy-MM-dd")?"border-orange-400 ring-2 ring-orange-100":"border-slate-100"}`,children:[e.jsxs("div",{className:"flex flex-col items-center justify-center bg-slate-900 text-white rounded-xl py-2 px-3 shrink-0",children:[e.jsx("span",{className:"text-[9px] font-bold opacity-60 uppercase leading-none",children:m(h,"MM/dd")}),e.jsx("span",{className:"text-[10px] font-black mt-1 uppercase leading-none",children:at[Y(h)]})]}),e.jsxs("div",{className:`w-16 md:w-20 py-2.5 md:py-3 ${c?"bg-slate-100":"bg-orange-50"} rounded-2xl flex flex-col items-center group-hover:bg-orange-600 transition-colors shrink-0`,children:[e.jsx("span",{className:`text-[9px] md:text-[10px] font-medium ${c?"text-slate-400":"text-orange-600"} group-hover:text-white`,children:s.startTime}),e.jsx("div",{className:"w-3 h-0.5 bg-current opacity-10 my-0.5"}),e.jsx("span",{className:`text-[9px] md:text-[10px] font-medium ${c?"text-slate-300":"text-orange-400"} group-hover:text-orange-100`,children:s.endTime})]}),e.jsxs("div",{className:"flex-1 overflow-hidden",children:[e.jsx("h4",{className:"font-semibold text-slate-800 text-sm md:text-base mb-0.5 truncate",children:s.userName}),e.jsx("p",{className:"text-xs text-slate-400 font-medium truncate",children:s.purpose})]}),e.jsx("div",{className:"pr-1 shrink-0",children:e.jsx("div",{className:`w-2.5 h-2.5 rounded-full ${c?"bg-slate-200":"bg-green-500"}`})})]},s.id)})}):e.jsxs("div",{className:"py-16 md:py-20 text-center bg-slate-50/50 rounded-[2rem] border-2 border-dashed border-slate-100",children:[e.jsx(lt,{className:"w-10 h-10 text-slate-200 mx-auto mb-4 pointer-events-none"}),e.jsx("p",{className:"text-slate-300 font-medium italic",children:"本月份尚無預約資料"})]})]})}),e.jsxs("footer",{className:"mt-auto py-6 bg-slate-900 text-white flex flex-col items-center shrink-0",children:[e.jsx("div",{className:"v2-badge p-2 rounded-lg mb-2 shadow-lg",children:e.jsx(dt,{className:"w-4 h-4 text-white pointer-events-none"})}),e.jsxs("div",{className:"text-center px-4",children:[e.jsx("p",{className:"text-[10px] font-medium tracking-[0.2em] uppercase opacity-80",children:Ye}),e.jsxs("div",{className:"flex items-center justify-center space-x-2 text-[9px] font-medium text-slate-500 uppercase tracking-widest mt-1",children:[e.jsx("span",{children:"Meeting Hub"}),e.jsx("span",{className:"w-1 h-1 bg-slate-700 rounded-full"}),e.jsx("span",{children:Fe})]})]})]})]}),se&&e.jsx(ut,{date:o,googleUser:w,isInternalNetwork:L,onGoogleLogin:be,onGoogleLogout:fe,editingBooking:R,onClose:()=>{E(!1),v(null)},onSave:ge,existingBookings:N.filter(s=>s.date===m(o,"yyyy-MM-dd")),requireGoogleLogin:P.requireGoogleLogin}),V&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-md animate-in fade-in",onClick:()=>C(!1),children:e.jsxs("div",{className:"w-full max-w-md bg-white rounded-[2rem] p-6 md:p-8 shadow-2xl animate-in zoom-in-95 relative overflow-hidden flex flex-col max-h-[90vh]",onClick:s=>s.stopPropagation(),children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-1.5 bg-gradient-to-r from-blue-400 to-purple-600"}),e.jsxs("div",{className:"flex justify-between items-start mb-6 shrink-0",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-50 rounded-2xl flex items-center justify-center mr-4 shrink-0",children:e.jsx(We,{className:"w-6 h-6 text-blue-600 pointer-events-none"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-base md:text-lg font-black text-slate-800 tracking-tight leading-tight",children:["羿鈞科技尊榮貴賓",e.jsx("br",{}),"無線網路連線指引"]}),e.jsx("p",{className:"text-[9px] font-medium text-slate-400 uppercase tracking-widest mt-0.5",children:"Guest Access Guide"})]})]}),e.jsx("button",{type:"button",onClick:()=>C(!1),className:"p-2 hover:bg-slate-100 rounded-full transition-colors",children:e.jsx(Ne,{className:"w-5 h-5 text-slate-300 pointer-events-none"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto no-scrollbar space-y-5",children:[e.jsxs("div",{className:"bg-blue-50/50 p-5 rounded-[1.5rem] border border-blue-100 space-y-3",children:[e.jsxs("h4",{className:"text-xs font-bold text-blue-900 flex items-center",children:[e.jsx(ms,{className:"w-4 h-4 mr-2 pointer-events-none"}),"連線步驟說明"]}),e.jsxs("div",{className:"space-y-3 text-xs leading-relaxed text-slate-600 font-medium",children:[e.jsxs("p",{children:["一、請先連線來賓專用 SSID：『 ",e.jsx("span",{className:"font-bold text-slate-900",children:P.guestSsid})," 』"]}),e.jsxs("p",{children:["二、連線成功後，請直接開啟裝置的瀏覽器，密碼請輸入『 ",e.jsx("span",{className:"font-bold text-slate-900",children:P.guestPwd})," 』即可連線。"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 items-center",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-100",children:[e.jsx("p",{className:"text-[10px] font-medium text-slate-400 uppercase tracking-widest mb-1",children:"SSID"}),e.jsx("p",{className:"text-xl font-black text-blue-600 break-all",children:P.guestSsid})]}),e.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-100",children:[e.jsx("p",{className:"text-[10px] font-medium text-slate-400 uppercase tracking-widest mb-1",children:"PASSWORD"}),e.jsx("p",{className:"text-xl font-black text-orange-600 break-all tracking-wider",children:P.guestPwd})]})]}),e.jsxs("div",{className:"flex flex-col items-center bg-slate-50 rounded-2xl p-5 border border-slate-100",children:[e.jsx("p",{className:"text-[10px] font-medium text-slate-400 uppercase tracking-widest mb-3",children:"或掃描快速連線"}),e.jsx(xt,{value:ke,size:100,level:"H",marginSize:1})]})]})]}),e.jsx("button",{type:"button",onClick:()=>C(!1),className:"w-full mt-6 bg-slate-900 text-white font-semibold py-3.5 rounded-2xl shadow-xl active:scale-95 text-sm",children:"我了解了"})]})}),ne&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-md animate-in fade-in",children:e.jsxs("div",{className:"w-full max-w-sm bg-white rounded-[2rem] p-8 md:p-10 shadow-2xl animate-in zoom-in-95",children:[e.jsx("div",{className:"flex justify-end -mt-4 -mr-4 mb-2",children:e.jsx("button",{type:"button",onClick:()=>q(!1),className:"p-2 text-slate-300 hover:text-slate-800 transition-colors",children:e.jsx(Ne,{className:"w-6 h-6 pointer-events-none"})})}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-14 h-14 bg-slate-100 rounded-[1.2rem] flex items-center justify-center mx-auto mb-3 transition-transform hover:scale-110 duration-300",children:e.jsx(vt,{className:"w-7 h-7 text-slate-800 pointer-events-none"})}),e.jsx("h2",{className:"text-xl font-bold text-slate-800 tracking-tight",children:"管理員登入"}),e.jsx("p",{className:"text-[10px] text-slate-400 mt-1 font-medium tracking-widest uppercase",children:"Meeting Hub Admin"})]}),e.jsxs("form",{onSubmit:s=>{s.preventDefault(),Se()},className:"space-y-3.5",children:[K&&e.jsxs("div",{className:"p-3 bg-red-50 text-red-600 rounded-xl text-xs font-medium border border-red-100 flex items-center animate-shake",children:[e.jsx(He,{className:"w-4 h-4 mr-2 pointer-events-none"}),K]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest px-1",children:"Account"}),e.jsx("input",{type:"text",className:"w-full px-5 py-3 rounded-2xl border-2 border-slate-100 bg-slate-50 outline-none focus:border-slate-800 transition-all font-bold text-black text-sm",placeholder:"請輸入帳號",value:de,onChange:s=>T(s.target.value)})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest px-1",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:Ie?"text":"password",className:"w-full px-5 py-3 rounded-2xl border-2 border-slate-100 bg-slate-50 outline-none focus:border-slate-800 transition-all font-bold text-black pr-12 text-sm",placeholder:"請輸入密碼",value:ae,onChange:s=>I(s.target.value)}),e.jsx("button",{type:"button",onClick:()=>ve(!Ie),className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-300 hover:text-slate-800 transition-colors",children:Ie?e.jsx(ps,{className:"w-5 h-5 pointer-events-none"}):e.jsx(hs,{className:"w-5 h-5 pointer-events-none"})})]})]}),e.jsxs("div",{className:"flex items-center px-1 pt-1.5 group",children:[e.jsx("div",{onClick:()=>ye(!re),className:`w-5 h-5 rounded-md border-2 flex items-center justify-center transition-all cursor-pointer mr-3 shrink-0 ${re?"bg-slate-900 border-slate-900 shadow-md":"bg-white border-slate-200 group-hover:border-slate-400"}`,children:re&&e.jsx(us,{className:"w-3.5 h-3.5 text-white pointer-events-none animate-in zoom-in-50"})}),e.jsx("span",{onClick:()=>ye(!re),className:"text-xs font-bold text-slate-500 cursor-pointer select-none group-hover:text-slate-800 transition-colors",children:"記住此帳號"})]}),e.jsx("button",{type:"submit",className:"w-full bg-slate-900 text-white font-bold py-3.5 rounded-2xl shadow-xl hover:bg-black transition-all active:scale-95 mt-3 text-sm tracking-widest uppercase",children:"進入管理介面"})]})]})}),ee&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/95 backdrop-blur-md animate-in fade-in",onClick:()=>f(!1),children:e.jsxs("div",{className:"bg-white p-8 rounded-[2rem] shadow-2xl flex flex-col items-center animate-in zoom-in-95 max-w-sm w-full",onClick:s=>s.stopPropagation(),children:[e.jsxs("h4",{className:"text-base font-semibold text-slate-800 mb-6 flex items-center",children:[e.jsx(Nt,{className:"w-4 h-4 text-orange-500 mr-2.5 fill-orange-500 pointer-events-none"}),"快速預約碼"]}),e.jsx("div",{className:"bg-slate-50 p-5 rounded-[1.5rem] border-2 border-dashed border-slate-200",children:e.jsx(xt,{value:he,size:160,level:"L",marginSize:1})}),e.jsx("p",{className:"mt-6 text-[10px] font-medium text-slate-400 text-center leading-relaxed",children:"偵測公司內網後可享快速登記"}),e.jsx("button",{type:"button",onClick:()=>f(!1),className:"mt-8 w-full py-3.5 bg-slate-900 text-white font-semibold rounded-2xl shadow-xl active:scale-95 text-sm",children:"關閉"})]})})]})},Ct=document.getElementById("root");if(!Ct)throw new Error("Could not find root element to mount to");const Cs=gs.createRoot(Ct);Cs.render(e.jsx(js.StrictMode,{children:e.jsx(Ss,{})}));
